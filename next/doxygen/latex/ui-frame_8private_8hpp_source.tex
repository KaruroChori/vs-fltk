\doxysection{ui-\/frame.private.\+hpp}
\hypertarget{ui-frame_8private_8hpp_source}{}\label{ui-frame_8private_8hpp_source}\index{include/ui-\/frame.private.hpp@{include/ui-\/frame.private.hpp}}

\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{preprocessor}{\#pragma\ once\ }}
\DoxyCodeLine{00002\ }
\DoxyCodeLine{00003\ \textcolor{preprocessor}{\#include\ <memory>}}
\DoxyCodeLine{00004\ }
\DoxyCodeLine{00005\ \textcolor{preprocessor}{\#include\ <FL/Fl\_Widget.H>}}
\DoxyCodeLine{00006\ }
\DoxyCodeLine{00007\ \textcolor{preprocessor}{\#include\ <string>}}
\DoxyCodeLine{00008\ \textcolor{preprocessor}{\#include\ <utils/strings.hpp>}}
\DoxyCodeLine{00009\ \textcolor{preprocessor}{\#include\ <ui-\/frame.hpp>}}
\DoxyCodeLine{00010\ }
\DoxyCodeLine{00011\ \textcolor{keyword}{namespace\ }vs\{}
\DoxyCodeLine{00012\ }
\DoxyCodeLine{00013\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classvs_1_1frame}{frame}}\{}
\DoxyCodeLine{00014\ \ \ \textcolor{keyword}{template}<std::derived\_from<Fl\_W\textcolor{keywordtype}{id}get>\ T,\ \textcolor{keywordtype}{int}\ SubType>}
\DoxyCodeLine{00015\ \ \ \textcolor{keyword}{friend}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classvs_1_1ui}{ui}};}
\DoxyCodeLine{00016\ }
\DoxyCodeLine{00017\ \ \ \textcolor{keyword}{friend}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classvs_1_1ui__base}{ui\_base}};}
\DoxyCodeLine{00018\ }
\DoxyCodeLine{00019\ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00020\ \ \ \ \ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structvs_1_1frame_1_1message__t}{message\_t}}\{}
\DoxyCodeLine{00021\ }
\DoxyCodeLine{00022\ \ \ \ \ \};}
\DoxyCodeLine{00023\ }
\DoxyCodeLine{00024\ \ \ \ \ \textcolor{keyword}{typedef}\ bool(*filter\_t)(\mbox{\hyperlink{structvs_1_1frame_1_1message__t}{message\_t}}*);}
\DoxyCodeLine{00025\ \ \ \ \ \textcolor{keyword}{typedef}\ bool(*resolver\_t)(\mbox{\hyperlink{structvs_1_1frame_1_1message__t}{message\_t}}*);}
\DoxyCodeLine{00026\ }
\DoxyCodeLine{00027\ \ \ \textcolor{keyword}{protected}:}
\DoxyCodeLine{00028\ \ \ \ \ std::shared\_ptr<void>\ script;}
\DoxyCodeLine{00029\ \ \ \ \ std::shared\_ptr<smap<symbol\_t>>\ symbols\ =\ \textcolor{keyword}{nullptr};\ \ \textcolor{comment}{//For\ symbol\ resolution\ on\ function\ calling\ }}
\DoxyCodeLine{00030\ \ \ \ \ }
\DoxyCodeLine{00031\ \ \ \ \ frame\_mode\_t\ mode\ =\ frame\_mode\_t::AUTO;}
\DoxyCodeLine{00032\ \ \ \ \ frame\_type\_t\ type;}
\DoxyCodeLine{00033\ \ \ \ \ frame\_access\_t\ access;}
\DoxyCodeLine{00034\ }
\DoxyCodeLine{00035\ \ \ \ \ \textcolor{keywordtype}{bool}\ is\_script\_module\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00036\ }
\DoxyCodeLine{00037\ \ \ \ \ std::string\ name;}
\DoxyCodeLine{00038\ \ \ \ \ \mbox{\hyperlink{classvs_1_1frame}{frame}}*\ parent\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00039\ \ \ \ \ \mbox{\hyperlink{classvs_1_1ui__base}{ui\_base}}*\ ui\_node\ =\textcolor{keyword}{nullptr};}
\DoxyCodeLine{00040\ }
\DoxyCodeLine{00041\ \ \ \ \ smap<frame*>\ children;}
\DoxyCodeLine{00042\ \ \ \ \ \mbox{\hyperlink{structvs_1_1symbol__t}{symbol\_t}}\ custom\_dispatcher\ =\ symbol\_t::VOID;}
\DoxyCodeLine{00043\ \ \ \ \ \textcolor{comment}{//smap<filter\_t>\ filters;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ //To\ prevent\ top/down\ propagation\ of\ messages}}
\DoxyCodeLine{00044\ \ \ \ \ \textcolor{comment}{//smap<resolver\_t>\ resolvers;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ //To\ catch\ messages\ coming\ from\ bottom\ up}}
\DoxyCodeLine{00045\ }
\DoxyCodeLine{00046\ \ \ \ \ smap<smap<std::string>>\ mixins;\ \ \ \textcolor{comment}{//Provide\ css-\/like\ classes\ for\ itself\ and\ children\ based\ on\ the\ same\ scoping\ rules\ for\ symbols.}}
\DoxyCodeLine{00047\ }
\DoxyCodeLine{00048\ }
\DoxyCodeLine{00049\ \ \ \ \ \textcolor{comment}{//Propagate\ search\ of\ a\ name\ down\ to\ children}}
\DoxyCodeLine{00050\ \ \ \ \ \mbox{\hyperlink{classvs_1_1frame}{frame}}*\ \_resolve\_name\_down(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ name,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classvs_1_1frame}{frame}}*\ origin)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00051\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classvs_1_1frame}{frame}}*\ \_resolve\_name(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ name,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classvs_1_1frame}{frame}}*\ origin)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00052\ }
\DoxyCodeLine{00053\ \ \ \ \ \textcolor{comment}{//Symbols\ are\ forced\ to\ match\ the\ tree\ structure\ to\ be\ found,\ from\ bottom\ to\ top}}
\DoxyCodeLine{00054\ \ \ \ \ \mbox{\hyperlink{structvs_1_1symbol__ret__t}{symbol\_ret\_t}}\ \_resolve\_symbol(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ name,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classvs_1_1frame}{frame}}*\ origin)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00055\ \ \ \ \ \mbox{\hyperlink{structvs_1_1symbol__ret__t}{symbol\_ret\_t}}\ \_resolve\_symbol\_local(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ name)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00056\ }
\DoxyCodeLine{00057\ \ \ \ \ std::pair<const\ smap<std::string>*,\textcolor{keyword}{const}\ \mbox{\hyperlink{classvs_1_1frame}{frame}}*>\_resolve\_mixin(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ name,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classvs_1_1frame}{frame}}*\ origin)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00058\ }
\DoxyCodeLine{00059\ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00060\ \ \ \ \ \textcolor{keyword}{inline}\ frame\_type\_t\ get\_type()\textcolor{keyword}{\ const\ }\{\textcolor{keywordflow}{return}\ type;\}}
\DoxyCodeLine{00061\ \ \ \ \ \textcolor{keyword}{inline}\ frame\_access\_t\ get\_access()\textcolor{keyword}{\ const\ }\{\textcolor{keywordflow}{return}\ access;\}}
\DoxyCodeLine{00062\ \ \ \ \ \textcolor{keyword}{inline}\ frame\_mode\_t\ get\_mode()\textcolor{keyword}{\ const\ }\{\textcolor{keywordflow}{return}\ mode;\}}
\DoxyCodeLine{00063\ }
\DoxyCodeLine{00064\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{bool}\ has\_script()\textcolor{keyword}{\ const\ }\{\textcolor{keywordflow}{return}\ script!=\textcolor{keyword}{nullptr};\}}
\DoxyCodeLine{00065\ }
\DoxyCodeLine{00066\ \ \ \ \ \textcolor{keywordtype}{int}\ call\_dispatcher(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ key,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ value);}
\DoxyCodeLine{00067\ }
\DoxyCodeLine{00068\ \ \ \ \ frame(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ name,\ frame\_mode\_t\ mode,\ ui\_base*\ ui\_node,\ frame*\ parent,\ frame\_type\_t\ type,\ frame\_access\_t\ access);}
\DoxyCodeLine{00069\ \ \ \ \ \textcolor{keyword}{virtual}\ \string~frame();}
\DoxyCodeLine{00070\ \ \ \ \ }
\DoxyCodeLine{00071\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keyword}{const}\ ui\_base*\ widget()\textcolor{keyword}{const}\{\textcolor{keywordflow}{return}\ ui\_node;\}}
\DoxyCodeLine{00072\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keyword}{const}\ frame*\ resolve\_name(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ name)\textcolor{keyword}{\ const\ }\{\textcolor{keywordflow}{return}\ \_resolve\_name(name,\ \textcolor{keyword}{this});\}}
\DoxyCodeLine{00073\ \ \ \ \ \textcolor{keyword}{inline}\ \mbox{\hyperlink{structsymbol__ret__t}{symbol\_ret\_t}}\ resolve\_symbol(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ name)\textcolor{keyword}{\ const\ }\{\textcolor{keywordflow}{return}\ \_resolve\_symbol(name,\ \textcolor{keyword}{this});\}}
\DoxyCodeLine{00074\ \ \ \ \ \textcolor{keyword}{inline}\ \mbox{\hyperlink{structsymbol__ret__t}{symbol\_ret\_t}}\ resolve\_symbol\_local(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ name)\textcolor{keyword}{\ const\ }\{\textcolor{keywordflow}{return}\ \_resolve\_symbol\_local(name);\}}
\DoxyCodeLine{00075\ \ \ \ \ \textcolor{keyword}{inline}\ std::pair<const\ smap<std::string>*,\textcolor{keyword}{const}\ frame*>\ resolve\_mixin(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ name)\textcolor{keyword}{\ const}\{\textcolor{keywordflow}{return}\ \_resolve\_mixin(name,\ \textcolor{keyword}{this});\}}
\DoxyCodeLine{00076\ \ \ \ \ smap<std::string>\ compile\_mixins(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ mixins\_list)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00077\ }
\DoxyCodeLine{00078\ }
\DoxyCodeLine{00079\ \ \ \ \ \textcolor{keywordtype}{void}\ signal\_to\_top(\textcolor{keyword}{const}\ message\_t*)\{}
\DoxyCodeLine{00080\ \ \ \ \ \ \ \ \ \textcolor{comment}{//TODO\ Add\ logic}}
\DoxyCodeLine{00081\ \ \ \ \ \}}
\DoxyCodeLine{00082\ \ \ \ \ \textcolor{keywordtype}{void}\ signal\_top\_bottom(\textcolor{keyword}{const}\ message\_t*)\{}
\DoxyCodeLine{00083\ \ \ \ \ \ \ \ \ \textcolor{comment}{//TODO\ Add\ logic}}
\DoxyCodeLine{00084\ \ \ \ \ \}}
\DoxyCodeLine{00085\ }
\DoxyCodeLine{00086\ \ \ \ \ \textcolor{comment}{//Change\ name\ for\ this\ node.}}
\DoxyCodeLine{00087\ \ \ \ \ \textcolor{keywordtype}{void}\ rename(\textcolor{keyword}{const}\ std::string\&\ new\_name);}
\DoxyCodeLine{00088\ \ \ \ \ \textcolor{keywordtype}{void}\ prune();}
\DoxyCodeLine{00089\ }
\DoxyCodeLine{00090\ \ \ \ \ \textcolor{comment}{//Only\ for\ local\ symbols\ as\ module\ ones\ are\ not\ owned}}
\DoxyCodeLine{00091\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ register\_symbol(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ name,\ symbol\_t\ value)\{symbols-\/>insert\_or\_assign(name,value);\}}
\DoxyCodeLine{00092\ \ \ \ \ \textcolor{keyword}{inline}\ symbol\_t\ get\_symbol(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ name)\{\textcolor{keyword}{const}\ \textcolor{keyword}{auto}\&\ it\ =\ symbols-\/>find(name);\textcolor{keywordflow}{if}(it==symbols-\/>end())\textcolor{keywordflow}{return}\ symbol\_t::VOID;\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{return}\ it-\/>second;\}}
\DoxyCodeLine{00093\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ unregister\_symbol(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ name)\{symbols-\/>erase(symbols-\/>find(name));\}}
\DoxyCodeLine{00094\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ reset\_symbols()\{symbols-\/>clear();\}}
\DoxyCodeLine{00095\ }
\DoxyCodeLine{00096\ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{00097\ \textcolor{comment}{\ \ \ \ //For\ top-\/>down\ signals}}
\DoxyCodeLine{00098\ \textcolor{comment}{\ \ \ \ inline\ void\ register\_filter(const\ char*\ name,\ filter\_t\ value)\{filters.insert\_or\_assign(name,value);\}}}
\DoxyCodeLine{00099\ \textcolor{comment}{\ \ \ \ inline\ const\ filter\_t\ get\_filter(const\ char*\ name)\{const\ auto\&\ it\ =\ filters.find(name);if(it==filters.end())return\ nullptr;\ else\ return\ it-\/>second;\}}}
\DoxyCodeLine{00100\ \textcolor{comment}{\ \ \ \ inline\ void\ unregister\_filter(const\ char*\ name)\{filters.erase(filters.find(name));\}}}
\DoxyCodeLine{00101\ \textcolor{comment}{\ \ \ \ inline\ void\ reset\_filters()\{filters.clear();\}}}
\DoxyCodeLine{00102\ \textcolor{comment}{}}
\DoxyCodeLine{00103\ \textcolor{comment}{\ \ \ \ //For\ bottom-\/>up\ signals}}
\DoxyCodeLine{00104\ \textcolor{comment}{\ \ \ \ inline\ void\ register\_resolver(const\ char*\ name,\ filter\_t\ value)\{resolvers.insert\_or\_assign(name,value);\}}}
\DoxyCodeLine{00105\ \textcolor{comment}{\ \ \ \ inline\ const\ resolver\_t\ get\_resolver(const\ char*\ name)\{const\ auto\&\ it\ =\ resolvers.find(name);if(it==resolvers.end())return\ nullptr;\ else\ return\ it-\/>second;\}}}
\DoxyCodeLine{00106\ \textcolor{comment}{\ \ \ \ inline\ void\ unregister\_resolver(const\ char*\ name)\{resolvers.erase(resolvers.find(name));\}}}
\DoxyCodeLine{00107\ \textcolor{comment}{\ \ \ \ inline\ void\ reset\_resolver()\{resolvers.clear();\}}}
\DoxyCodeLine{00108\ \textcolor{comment}{\ \ \ \ */}}
\DoxyCodeLine{00109\ }
\DoxyCodeLine{00110\ \ \ \ \ \textcolor{comment}{//TODO\ helpers\ for\ mixin?}}
\DoxyCodeLine{00111\ \};}
\DoxyCodeLine{00112\ }
\DoxyCodeLine{00113\ \}}

\end{DoxyCode}
