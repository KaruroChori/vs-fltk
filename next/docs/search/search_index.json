{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"Important This project is very much in its infancy. At the moment final users are not expected to install or run vs , so this document has not been filled in yet. Thank you for choosing vs , the lightweight UI runtime. This page covers the basics to get started with it as a user! Downloading binaries # You can download the latest binaries for the supported platforms from the releases page. If you wish to compile vs on your own, please check the developer docs . Installation # Running a vs application # Once installed, vs will be available in your system either as a desktop launcher entry or via command line. If installed as a native application you can just use it typing vs in the terminal. If you installed it as a flatpak, flatpak run com.karurochari.vs . Running vs via command lines allows you to specify custom environment variables or to run some of its subcommands without navigating the embedded UI. The rest of the document will cover this. Embedded tools # Running an application # Builtin editor # Builtin workspace # Environment variables # In general they are not really meant to be useful for most users, but they are all reported in here . User profiles #","title":"Home"},{"location":"#downloading-binaries","text":"You can download the latest binaries for the supported platforms from the releases page. If you wish to compile vs on your own, please check the developer docs .","title":"Downloading binaries"},{"location":"#installation","text":"","title":"Installation"},{"location":"#running-a-vs-application","text":"Once installed, vs will be available in your system either as a desktop launcher entry or via command line. If installed as a native application you can just use it typing vs in the terminal. If you installed it as a flatpak, flatpak run com.karurochari.vs . Running vs via command lines allows you to specify custom environment variables or to run some of its subcommands without navigating the embedded UI. The rest of the document will cover this.","title":"Running a vs application"},{"location":"#embedded-tools","text":"","title":"Embedded tools"},{"location":"#running-an-application","text":"","title":"Running an application"},{"location":"#builtin-editor","text":"","title":"Builtin editor"},{"location":"#builtin-workspace","text":"","title":"Builtin workspace"},{"location":"#environment-variables","text":"In general they are not really meant to be useful for most users, but they are all reported in here .","title":"Environment variables"},{"location":"#user-profiles","text":"","title":"User profiles"},{"location":"LICENCE/","text":"Creative Commons Attribution-ShareAlike 4.0 International # Creative Commons Corporation (\u201cCreative Commons\u201d) is not a law firm and does not provide legal services or legal advice. Distribution of Creative Commons public licenses does not create a lawyer-client or other relationship. Creative Commons makes its licenses and related information available on an \u201cas-is\u201d basis. Creative Commons gives no warranties regarding its licenses, any material licensed under their terms and conditions, or any related information. Creative Commons disclaims all liability for damages resulting from their use to the fullest extent possible. Using Creative Commons Public Licenses Creative Commons public licenses provide a standard set of terms and conditions that creators and other rights holders may use to share original works of authorship and other material subject to copyright and certain other rights specified in the public license below. The following considerations are for informational purposes only, are not exhaustive, and do not form part of our licenses. Considerations for licensors: Our public licenses are intended for use by those authorized to give the public permission to use material in ways otherwise restricted by copyright and certain other rights. Our licenses are irrevocable. Licensors should read and understand the terms and conditions of the license they choose before applying it. Licensors should also secure all rights necessary before applying our licenses so that the public can reuse the material as expected. Licensors should clearly mark any material not subject to the license. This includes other CC-licensed material, or material used under an exception or limitation to copyright. More considerations for licensors . Considerations for the public: By using one of our public licenses, a licensor grants the public permission to use the licensed material under specified terms and conditions. If the licensor\u2019s permission is not necessary for any reason\u2013for example, because of any applicable exception or limitation to copyright\u2013then that use is not regulated by the license. Our licenses grant only permissions under copyright and certain other rights that a licensor has authority to grant. Use of the licensed material may still be restricted for other reasons, including because others have copyright or other rights in the material. A licensor may make special requests, such as asking that all changes be marked or described. Although not required by our licenses, you are encouraged to respect those requests where reasonable. More considerations for the public . Creative Commons Attribution-ShareAlike 4.0 International Public License # By exercising the Licensed Rights (defined below), You accept and agree to be bound by the terms and conditions of this Creative Commons Attribution-ShareAlike 4.0 International Public License (\u201cPublic License\u201d). To the extent this Public License may be interpreted as a contract, You are granted the Licensed Rights in consideration of Your acceptance of these terms and conditions, and the Licensor grants You such rights in consideration of benefits the Licensor receives from making the Licensed Material available under these terms and conditions. Section 1 \u2013 Definitions. # a. Adapted Material means material subject to Copyright and Similar Rights that is derived from or based upon the Licensed Material and in which the Licensed Material is translated, altered, arranged, transformed, or otherwise modified in a manner requiring permission under the Copyright and Similar Rights held by the Licensor. For purposes of this Public License, where the Licensed Material is a musical work, performance, or sound recording, Adapted Material is always produced where the Licensed Material is synched in timed relation with a moving image. b. Adapter\u2019s License means the license You apply to Your Copyright and Similar Rights in Your contributions to Adapted Material in accordance with the terms and conditions of this Public License. c. BY-SA Compatible License means a license listed at creativecommons.org/compatiblelicenses , approved by Creative Commons as essentially the equivalent of this Public License. d. Copyright and Similar Rights means copyright and/or similar rights closely related to copyright including, without limitation, performance, broadcast, sound recording, and Sui Generis Database Rights, without regard to how the rights are labeled or categorized. For purposes of this Public License, the rights specified in Section 2(b)(1)-(2) are not Copyright and Similar Rights. e. Effective Technological Measures means those measures that, in the absence of proper authority, may not be circumvented under laws fulfilling obligations under Article 11 of the WIPO Copyright Treaty adopted on December 20, 1996, and/or similar international agreements. f. Exceptions and Limitations means fair use, fair dealing, and/or any other exception or limitation to Copyright and Similar Rights that applies to Your use of the Licensed Material. g. License Elements means the license attributes listed in the name of a Creative Commons Public License. The License Elements of this Public License are Attribution and ShareAlike. h. Licensed Material means the artistic or literary work, database, or other material to which the Licensor applied this Public License. i. Licensed Rights means the rights granted to You subject to the terms and conditions of this Public License, which are limited to all Copyright and Similar Rights that apply to Your use of the Licensed Material and that the Licensor has authority to license. j. Licensor means the individual(s) or entity(ies) granting rights under this Public License. k. Share means to provide material to the public by any means or process that requires permission under the Licensed Rights, such as reproduction, public display, public performance, distribution, dissemination, communication, or importation, and to make material available to the public including in ways that members of the public may access the material from a place and at a time individually chosen by them. l. Sui Generis Database Rights means rights other than copyright resulting from Directive 96/9/EC of the European Parliament and of the Council of 11 March 1996 on the legal protection of databases, as amended and/or succeeded, as well as other essentially equivalent rights anywhere in the world. m. You means the individual or entity exercising the Licensed Rights under this Public License. Your has a corresponding meaning. Section 2 \u2013 Scope. # a. License grant. Subject to the terms and conditions of this Public License, the Licensor hereby grants You a worldwide, royalty-free, non-sublicensable, non-exclusive, irrevocable license to exercise the Licensed Rights in the Licensed Material to: A. reproduce and Share the Licensed Material, in whole or in part; and B. produce, reproduce, and Share Adapted Material. Exceptions and Limitations. For the avoidance of doubt, where Exceptions and Limitations apply to Your use, this Public License does not apply, and You do not need to comply with its terms and conditions. Term. The term of this Public License is specified in Section 6(a). Media and formats; technical modifications allowed. The Licensor authorizes You to exercise the Licensed Rights in all media and formats whether now known or hereafter created, and to make technical modifications necessary to do so. The Licensor waives and/or agrees not to assert any right or authority to forbid You from making technical modifications necessary to exercise the Licensed Rights, including technical modifications necessary to circumvent Effective Technological Measures. For purposes of this Public License, simply making modifications authorized by this Section 2(a)(4) never produces Adapted Material. Downstream recipients. A. Offer from the Licensor \u2013 Licensed Material. Every recipient of the Licensed Material automatically receives an offer from the Licensor to exercise the Licensed Rights under the terms and conditions of this Public License. B. Additional offer from the Licensor \u2013 Adapted Material. Every recipient of Adapted Material from You automatically receives an offer from the Licensor to exercise the Licensed Rights in the Adapted Material under the conditions of the Adapter\u2019s License You apply. C. No downstream restrictions. You may not offer or impose any additional or different terms or conditions on, or apply any Effective Technological Measures to, the Licensed Material if doing so restricts exercise of the Licensed Rights by any recipient of the Licensed Material. No endorsement. Nothing in this Public License constitutes or may be construed as permission to assert or imply that You are, or that Your use of the Licensed Material is, connected with, or sponsored, endorsed, or granted official status by, the Licensor or others designated to receive attribution as provided in Section 3(a)(1)(A)(i). b. Other rights. Moral rights, such as the right of integrity, are not licensed under this Public License, nor are publicity, privacy, and/or other similar personality rights; however, to the extent possible, the Licensor waives and/or agrees not to assert any such rights held by the Licensor to the limited extent necessary to allow You to exercise the Licensed Rights, but not otherwise. Patent and trademark rights are not licensed under this Public License. To the extent possible, the Licensor waives any right to collect royalties from You for the exercise of the Licensed Rights, whether directly or through a collecting society under any voluntary or waivable statutory or compulsory licensing scheme. In all other cases the Licensor expressly reserves any right to collect such royalties. Section 3 \u2013 License Conditions. # Your exercise of the Licensed Rights is expressly made subject to the following conditions. a. Attribution. If You Share the Licensed Material (including in modified form), You must: A. retain the following if it is supplied by the Licensor with the Licensed Material: i. identification of the creator(s) of the Licensed Material and any others designated to receive attribution, in any reasonable manner requested by the Licensor (including by pseudonym if designated); ii. a copyright notice; iii. a notice that refers to this Public License; iv. a notice that refers to the disclaimer of warranties; v. a URI or hyperlink to the Licensed Material to the extent reasonably practicable; B. indicate if You modified the Licensed Material and retain an indication of any previous modifications; and C. indicate the Licensed Material is licensed under this Public License, and include the text of, or the URI or hyperlink to, this Public License. You may satisfy the conditions in Section 3(a)(1) in any reasonable manner based on the medium, means, and context in which You Share the Licensed Material. For example, it may be reasonable to satisfy the conditions by providing a URI or hyperlink to a resource that includes the required information. If requested by the Licensor, You must remove any of the information required by Section 3(a)(1)(A) to the extent reasonably practicable. b. ShareAlike. In addition to the conditions in Section 3(a), if You Share Adapted Material You produce, the following conditions also apply. The Adapter\u2019s License You apply must be a Creative Commons license with the same License Elements, this version or later, or a BY-SA Compatible License. You must include the text of, or the URI or hyperlink to, the Adapter\u2019s License You apply. You may satisfy this condition in any reasonable manner based on the medium, means, and context in which You Share Adapted Material. You may not offer or impose any additional or different terms or conditions on, or apply any Effective Technological Measures to, Adapted Material that restrict exercise of the rights granted under the Adapter\u2019s License You apply. Section 4 \u2013 Sui Generis Database Rights. # Where the Licensed Rights include Sui Generis Database Rights that apply to Your use of the Licensed Material: a. for the avoidance of doubt, Section 2(a)(1) grants You the right to extract, reuse, reproduce, and Share all or a substantial portion of the contents of the database; b. if You include all or a substantial portion of the database contents in a database in which You have Sui Generis Database Rights, then the database in which You have Sui Generis Database Rights (but not its individual contents) is Adapted Material, including for purposes of Section 3(b); and c. You must comply with the conditions in Section 3(a) if You Share all or a substantial portion of the contents of the database. For the avoidance of doubt, this Section 4 supplements and does not replace Your obligations under this Public License where the Licensed Rights include other Copyright and Similar Rights. Section 5 \u2013 Disclaimer of Warranties and Limitation of Liability. # a. Unless otherwise separately undertaken by the Licensor, to the extent possible, the Licensor offers the Licensed Material as-is and as-available, and makes no representations or warranties of any kind concerning the Licensed Material, whether express, implied, statutory, or other. This includes, without limitation, warranties of title, merchantability, fitness for a particular purpose, non-infringement, absence of latent or other defects, accuracy, or the presence or absence of errors, whether or not known or discoverable. Where disclaimers of warranties are not allowed in full or in part, this disclaimer may not apply to You. b. To the extent possible, in no event will the Licensor be liable to You on any legal theory (including, without limitation, negligence) or otherwise for any direct, special, indirect, incidental, consequential, punitive, exemplary, or other losses, costs, expenses, or damages arising out of this Public License or use of the Licensed Material, even if the Licensor has been advised of the possibility of such losses, costs, expenses, or damages. Where a limitation of liability is not allowed in full or in part, this limitation may not apply to You. c. The disclaimer of warranties and limitation of liability provided above shall be interpreted in a manner that, to the extent possible, most closely approximates an absolute disclaimer and waiver of all liability. Section 6 \u2013 Term and Termination. # a. This Public License applies for the term of the Copyright and Similar Rights licensed here. However, if You fail to comply with this Public License, then Your rights under this Public License terminate automatically. b. Where Your right to use the Licensed Material has terminated under Section 6(a), it reinstates: automatically as of the date the violation is cured, provided it is cured within 30 days of Your discovery of the violation; or upon express reinstatement by the Licensor. For the avoidance of doubt, this Section 6(b) does not affect any right the Licensor may have to seek remedies for Your violations of this Public License. c. For the avoidance of doubt, the Licensor may also offer the Licensed Material under separate terms or conditions or stop distributing the Licensed Material at any time; however, doing so will not terminate this Public License. d. Sections 1, 5, 6, 7, and 8 survive termination of this Public License. Section 7 \u2013 Other Terms and Conditions. # a. The Licensor shall not be bound by any additional or different terms or conditions communicated by You unless expressly agreed. b. Any arrangements, understandings, or agreements regarding the Licensed Material not stated herein are separate from and independent of the terms and conditions of this Public License. Section 8 \u2013 Interpretation. # a. For the avoidance of doubt, this Public License does not, and shall not be interpreted to, reduce, limit, restrict, or impose conditions on any use of the Licensed Material that could lawfully be made without permission under this Public License. b. To the extent possible, if any provision of this Public License is deemed unenforceable, it shall be automatically reformed to the minimum extent necessary to make it enforceable. If the provision cannot be reformed, it shall be severed from this Public License without affecting the enforceability of the remaining terms and conditions. c. No term or condition of this Public License will be waived and no failure to comply consented to unless expressly agreed to by the Licensor. d. Nothing in this Public License constitutes or may be interpreted as a limitation upon, or waiver of, any privileges and immunities that apply to the Licensor or You, including from the legal processes of any jurisdiction or authority. Creative Commons is not a party to its public licenses. Notwithstanding, Creative Commons may elect to apply one of its public licenses to material it publishes and in those instances will be considered the \u201cLicensor.\u201d The text of the Creative Commons public licenses is dedicated to the public domain under the CC0 Public Domain Dedication . Except for the limited purpose of indicating that material is shared under a Creative Commons public license or as otherwise permitted by the Creative Commons policies published at creativecommons.org/policies , Creative Commons does not authorize the use of the trademark \u201cCreative Commons\u201d or any other trademark or logo of Creative Commons without its prior written consent including, without limitation, in connection with any unauthorized modifications to any of its public licenses or any other arrangements, understandings, or agreements concerning use of licensed material. For the avoidance of doubt, this paragraph does not form part of the public licenses. Creative Commons may be contacted at creativecommons.org.","title":"LICENCE"},{"location":"LICENCE/#creative-commons-attribution-sharealike-40-international","text":"Creative Commons Corporation (\u201cCreative Commons\u201d) is not a law firm and does not provide legal services or legal advice. Distribution of Creative Commons public licenses does not create a lawyer-client or other relationship. Creative Commons makes its licenses and related information available on an \u201cas-is\u201d basis. Creative Commons gives no warranties regarding its licenses, any material licensed under their terms and conditions, or any related information. Creative Commons disclaims all liability for damages resulting from their use to the fullest extent possible. Using Creative Commons Public Licenses Creative Commons public licenses provide a standard set of terms and conditions that creators and other rights holders may use to share original works of authorship and other material subject to copyright and certain other rights specified in the public license below. The following considerations are for informational purposes only, are not exhaustive, and do not form part of our licenses. Considerations for licensors: Our public licenses are intended for use by those authorized to give the public permission to use material in ways otherwise restricted by copyright and certain other rights. Our licenses are irrevocable. Licensors should read and understand the terms and conditions of the license they choose before applying it. Licensors should also secure all rights necessary before applying our licenses so that the public can reuse the material as expected. Licensors should clearly mark any material not subject to the license. This includes other CC-licensed material, or material used under an exception or limitation to copyright. More considerations for licensors . Considerations for the public: By using one of our public licenses, a licensor grants the public permission to use the licensed material under specified terms and conditions. If the licensor\u2019s permission is not necessary for any reason\u2013for example, because of any applicable exception or limitation to copyright\u2013then that use is not regulated by the license. Our licenses grant only permissions under copyright and certain other rights that a licensor has authority to grant. Use of the licensed material may still be restricted for other reasons, including because others have copyright or other rights in the material. A licensor may make special requests, such as asking that all changes be marked or described. Although not required by our licenses, you are encouraged to respect those requests where reasonable. More considerations for the public .","title":"Creative Commons Attribution-ShareAlike 4.0 International"},{"location":"LICENCE/#creative-commons-attribution-sharealike-40-international-public-license","text":"By exercising the Licensed Rights (defined below), You accept and agree to be bound by the terms and conditions of this Creative Commons Attribution-ShareAlike 4.0 International Public License (\u201cPublic License\u201d). To the extent this Public License may be interpreted as a contract, You are granted the Licensed Rights in consideration of Your acceptance of these terms and conditions, and the Licensor grants You such rights in consideration of benefits the Licensor receives from making the Licensed Material available under these terms and conditions.","title":"Creative Commons Attribution-ShareAlike 4.0 International Public License"},{"location":"LICENCE/#section-1-definitions","text":"a. Adapted Material means material subject to Copyright and Similar Rights that is derived from or based upon the Licensed Material and in which the Licensed Material is translated, altered, arranged, transformed, or otherwise modified in a manner requiring permission under the Copyright and Similar Rights held by the Licensor. For purposes of this Public License, where the Licensed Material is a musical work, performance, or sound recording, Adapted Material is always produced where the Licensed Material is synched in timed relation with a moving image. b. Adapter\u2019s License means the license You apply to Your Copyright and Similar Rights in Your contributions to Adapted Material in accordance with the terms and conditions of this Public License. c. BY-SA Compatible License means a license listed at creativecommons.org/compatiblelicenses , approved by Creative Commons as essentially the equivalent of this Public License. d. Copyright and Similar Rights means copyright and/or similar rights closely related to copyright including, without limitation, performance, broadcast, sound recording, and Sui Generis Database Rights, without regard to how the rights are labeled or categorized. For purposes of this Public License, the rights specified in Section 2(b)(1)-(2) are not Copyright and Similar Rights. e. Effective Technological Measures means those measures that, in the absence of proper authority, may not be circumvented under laws fulfilling obligations under Article 11 of the WIPO Copyright Treaty adopted on December 20, 1996, and/or similar international agreements. f. Exceptions and Limitations means fair use, fair dealing, and/or any other exception or limitation to Copyright and Similar Rights that applies to Your use of the Licensed Material. g. License Elements means the license attributes listed in the name of a Creative Commons Public License. The License Elements of this Public License are Attribution and ShareAlike. h. Licensed Material means the artistic or literary work, database, or other material to which the Licensor applied this Public License. i. Licensed Rights means the rights granted to You subject to the terms and conditions of this Public License, which are limited to all Copyright and Similar Rights that apply to Your use of the Licensed Material and that the Licensor has authority to license. j. Licensor means the individual(s) or entity(ies) granting rights under this Public License. k. Share means to provide material to the public by any means or process that requires permission under the Licensed Rights, such as reproduction, public display, public performance, distribution, dissemination, communication, or importation, and to make material available to the public including in ways that members of the public may access the material from a place and at a time individually chosen by them. l. Sui Generis Database Rights means rights other than copyright resulting from Directive 96/9/EC of the European Parliament and of the Council of 11 March 1996 on the legal protection of databases, as amended and/or succeeded, as well as other essentially equivalent rights anywhere in the world. m. You means the individual or entity exercising the Licensed Rights under this Public License. Your has a corresponding meaning.","title":"Section 1 \u2013 Definitions."},{"location":"LICENCE/#section-2-scope","text":"a. License grant. Subject to the terms and conditions of this Public License, the Licensor hereby grants You a worldwide, royalty-free, non-sublicensable, non-exclusive, irrevocable license to exercise the Licensed Rights in the Licensed Material to: A. reproduce and Share the Licensed Material, in whole or in part; and B. produce, reproduce, and Share Adapted Material. Exceptions and Limitations. For the avoidance of doubt, where Exceptions and Limitations apply to Your use, this Public License does not apply, and You do not need to comply with its terms and conditions. Term. The term of this Public License is specified in Section 6(a). Media and formats; technical modifications allowed. The Licensor authorizes You to exercise the Licensed Rights in all media and formats whether now known or hereafter created, and to make technical modifications necessary to do so. The Licensor waives and/or agrees not to assert any right or authority to forbid You from making technical modifications necessary to exercise the Licensed Rights, including technical modifications necessary to circumvent Effective Technological Measures. For purposes of this Public License, simply making modifications authorized by this Section 2(a)(4) never produces Adapted Material. Downstream recipients. A. Offer from the Licensor \u2013 Licensed Material. Every recipient of the Licensed Material automatically receives an offer from the Licensor to exercise the Licensed Rights under the terms and conditions of this Public License. B. Additional offer from the Licensor \u2013 Adapted Material. Every recipient of Adapted Material from You automatically receives an offer from the Licensor to exercise the Licensed Rights in the Adapted Material under the conditions of the Adapter\u2019s License You apply. C. No downstream restrictions. You may not offer or impose any additional or different terms or conditions on, or apply any Effective Technological Measures to, the Licensed Material if doing so restricts exercise of the Licensed Rights by any recipient of the Licensed Material. No endorsement. Nothing in this Public License constitutes or may be construed as permission to assert or imply that You are, or that Your use of the Licensed Material is, connected with, or sponsored, endorsed, or granted official status by, the Licensor or others designated to receive attribution as provided in Section 3(a)(1)(A)(i). b. Other rights. Moral rights, such as the right of integrity, are not licensed under this Public License, nor are publicity, privacy, and/or other similar personality rights; however, to the extent possible, the Licensor waives and/or agrees not to assert any such rights held by the Licensor to the limited extent necessary to allow You to exercise the Licensed Rights, but not otherwise. Patent and trademark rights are not licensed under this Public License. To the extent possible, the Licensor waives any right to collect royalties from You for the exercise of the Licensed Rights, whether directly or through a collecting society under any voluntary or waivable statutory or compulsory licensing scheme. In all other cases the Licensor expressly reserves any right to collect such royalties.","title":"Section 2 \u2013 Scope."},{"location":"LICENCE/#section-3-license-conditions","text":"Your exercise of the Licensed Rights is expressly made subject to the following conditions. a. Attribution. If You Share the Licensed Material (including in modified form), You must: A. retain the following if it is supplied by the Licensor with the Licensed Material: i. identification of the creator(s) of the Licensed Material and any others designated to receive attribution, in any reasonable manner requested by the Licensor (including by pseudonym if designated); ii. a copyright notice; iii. a notice that refers to this Public License; iv. a notice that refers to the disclaimer of warranties; v. a URI or hyperlink to the Licensed Material to the extent reasonably practicable; B. indicate if You modified the Licensed Material and retain an indication of any previous modifications; and C. indicate the Licensed Material is licensed under this Public License, and include the text of, or the URI or hyperlink to, this Public License. You may satisfy the conditions in Section 3(a)(1) in any reasonable manner based on the medium, means, and context in which You Share the Licensed Material. For example, it may be reasonable to satisfy the conditions by providing a URI or hyperlink to a resource that includes the required information. If requested by the Licensor, You must remove any of the information required by Section 3(a)(1)(A) to the extent reasonably practicable. b. ShareAlike. In addition to the conditions in Section 3(a), if You Share Adapted Material You produce, the following conditions also apply. The Adapter\u2019s License You apply must be a Creative Commons license with the same License Elements, this version or later, or a BY-SA Compatible License. You must include the text of, or the URI or hyperlink to, the Adapter\u2019s License You apply. You may satisfy this condition in any reasonable manner based on the medium, means, and context in which You Share Adapted Material. You may not offer or impose any additional or different terms or conditions on, or apply any Effective Technological Measures to, Adapted Material that restrict exercise of the rights granted under the Adapter\u2019s License You apply.","title":"Section 3 \u2013 License Conditions."},{"location":"LICENCE/#section-4-sui-generis-database-rights","text":"Where the Licensed Rights include Sui Generis Database Rights that apply to Your use of the Licensed Material: a. for the avoidance of doubt, Section 2(a)(1) grants You the right to extract, reuse, reproduce, and Share all or a substantial portion of the contents of the database; b. if You include all or a substantial portion of the database contents in a database in which You have Sui Generis Database Rights, then the database in which You have Sui Generis Database Rights (but not its individual contents) is Adapted Material, including for purposes of Section 3(b); and c. You must comply with the conditions in Section 3(a) if You Share all or a substantial portion of the contents of the database. For the avoidance of doubt, this Section 4 supplements and does not replace Your obligations under this Public License where the Licensed Rights include other Copyright and Similar Rights.","title":"Section 4 \u2013 Sui Generis Database Rights."},{"location":"LICENCE/#section-5-disclaimer-of-warranties-and-limitation-of-liability","text":"a. Unless otherwise separately undertaken by the Licensor, to the extent possible, the Licensor offers the Licensed Material as-is and as-available, and makes no representations or warranties of any kind concerning the Licensed Material, whether express, implied, statutory, or other. This includes, without limitation, warranties of title, merchantability, fitness for a particular purpose, non-infringement, absence of latent or other defects, accuracy, or the presence or absence of errors, whether or not known or discoverable. Where disclaimers of warranties are not allowed in full or in part, this disclaimer may not apply to You. b. To the extent possible, in no event will the Licensor be liable to You on any legal theory (including, without limitation, negligence) or otherwise for any direct, special, indirect, incidental, consequential, punitive, exemplary, or other losses, costs, expenses, or damages arising out of this Public License or use of the Licensed Material, even if the Licensor has been advised of the possibility of such losses, costs, expenses, or damages. Where a limitation of liability is not allowed in full or in part, this limitation may not apply to You. c. The disclaimer of warranties and limitation of liability provided above shall be interpreted in a manner that, to the extent possible, most closely approximates an absolute disclaimer and waiver of all liability.","title":"Section 5 \u2013 Disclaimer of Warranties and Limitation of Liability."},{"location":"LICENCE/#section-6-term-and-termination","text":"a. This Public License applies for the term of the Copyright and Similar Rights licensed here. However, if You fail to comply with this Public License, then Your rights under this Public License terminate automatically. b. Where Your right to use the Licensed Material has terminated under Section 6(a), it reinstates: automatically as of the date the violation is cured, provided it is cured within 30 days of Your discovery of the violation; or upon express reinstatement by the Licensor. For the avoidance of doubt, this Section 6(b) does not affect any right the Licensor may have to seek remedies for Your violations of this Public License. c. For the avoidance of doubt, the Licensor may also offer the Licensed Material under separate terms or conditions or stop distributing the Licensed Material at any time; however, doing so will not terminate this Public License. d. Sections 1, 5, 6, 7, and 8 survive termination of this Public License.","title":"Section 6 \u2013 Term and Termination."},{"location":"LICENCE/#section-7-other-terms-and-conditions","text":"a. The Licensor shall not be bound by any additional or different terms or conditions communicated by You unless expressly agreed. b. Any arrangements, understandings, or agreements regarding the Licensed Material not stated herein are separate from and independent of the terms and conditions of this Public License.","title":"Section 7 \u2013 Other Terms and Conditions."},{"location":"LICENCE/#section-8-interpretation","text":"a. For the avoidance of doubt, this Public License does not, and shall not be interpreted to, reduce, limit, restrict, or impose conditions on any use of the Licensed Material that could lawfully be made without permission under this Public License. b. To the extent possible, if any provision of this Public License is deemed unenforceable, it shall be automatically reformed to the minimum extent necessary to make it enforceable. If the provision cannot be reformed, it shall be severed from this Public License without affecting the enforceability of the remaining terms and conditions. c. No term or condition of this Public License will be waived and no failure to comply consented to unless expressly agreed to by the Licensor. d. Nothing in this Public License constitutes or may be interpreted as a limitation upon, or waiver of, any privileges and immunities that apply to the Licensor or You, including from the legal processes of any jurisdiction or authority. Creative Commons is not a party to its public licenses. Notwithstanding, Creative Commons may elect to apply one of its public licenses to material it publishes and in those instances will be considered the \u201cLicensor.\u201d The text of the Creative Commons public licenses is dedicated to the public domain under the CC0 Public Domain Dedication . Except for the limited purpose of indicating that material is shared under a Creative Commons public license or as otherwise permitted by the Creative Commons policies published at creativecommons.org/policies , Creative Commons does not authorize the use of the trademark \u201cCreative Commons\u201d or any other trademark or logo of Creative Commons without its prior written consent including, without limitation, in connection with any unauthorized modifications to any of its public licenses or any other arrangements, understandings, or agreements concerning use of licensed material. For the avoidance of doubt, this paragraph does not form part of the public licenses. Creative Commons may be contacted at creativecommons.org.","title":"Section 8 \u2013 Interpretation."},{"location":"faq/","text":"General questions # While vs shares many of its technologies and ideas with modern SFC frameworks, its design is significantly more opinionated and less free. This document addresses several of the perceived or actual shortcomings, and provides some of the implied rationale. What is an SFC (Single File Component)? # SFCs are special files encapsulating templates, style and logic of a self-contained UI unit. They first appeared as part of long defunct proposal for native html components & XHTML XSLT components. They are now implemented in modern frameworks like svelte or vue . Can we have something like <canvas> ? # No. You are free to add or use a custom native component if you really want. If you don\u2019t really need a full canvas, there is support still for arbitrary SVG files as part of fltk . But canvas-like components are not and will never be part of the core components shipped with vs . Because of that, such capabilities are not meant to be universally accessible by vs users. The reason is that canvas-like components can be abused to replace UI primitives, breaking the semantics on which accessibility tools and robots are relying upon. Furthermore, to be useful we should also allow arbitrary execution of code in embedded scripts that is generally discouraged even when enabled. Can we have a webgpu, opengl, vulkan context? # No, same as for <canvas> . But feel free to wrap a vs UI around a custom vulkan viewport if that fits you application. Be mindful you would need some way to distribute your custom software as it will not be working out of the box for most users. Why C in embedded scrips? It is unsafe! # Yes, you are basically giving all keys to the XML provider to run arbitrary code on your machine. Even if vs is not exposing direct access to the fs or network to embedded scripts, arbitrary C code, once compiled, will be able to do arbitrary things. It is understandable that from the point of view of \u201cweb development\u201d this idea is absurd. But vs is not about web development, its main objective is to provide lightweight native UIs. You can load XML components and resources from the internet & gemini, but you should only accept native components and native scripts from trusted sources, quite possibly some you have control over. Still, that would be not less safe than just compiling and running some random code from github, but for some reason one is more socially accepted. By comparison, QuickJS, Lua and especially WAMR do offer a much more sandboxed experience. In the future it will be possible to set up robust policies based on domains to determine which type of scripts should be allowed if any. For now, there are some coarse environment variables that can be set to fully disable certain features. Can it be used for fully standalone applications? # Ideally yes. Broadly speaking there are three \u201cmodes\u201d in which vs can operate: As a fully standalone application. The main issue being the limited selection of functions which are made available in embedded scripts, and their sandboxed nature which only allows specific types of symbols to be exposed and shared. Keep in mind that even while working in C, as unsafe as it is, you are not given direct full access to the standard library; this is deliberate design decision to limit the scope of custom code in scripts. As the front-end of a dynamically linked library which embeds all complex functionalities and provides hooks to the UI in vs . Events triggered from UI will trigger calls to features exposed in your library. Useful for event driven applications, like providing a simple visual front-end to your CLI. As the front-end of a separate process, sharing information via UNIX Domain Sockets. Useful for multi-client applications, or those in which the bulk of the operations are not event driven. It also avoids the need to compile your codebase into a dynamic library, allowing it to interoperate with virtually any runtime. For now, most efforts are focused in making the first two options viable. The third one is planned for later. How to map SFC concepts to vs ? # Concept Web VS Components XML or HTML template XML Static templating XSLT or JSX vs-templ (XSLT-like) Dynamic templating alpine, htmx, jquery, \u2026 Restricted, via standard components Style XSLT and/or CSS and transpilation Mixins Scripting JS, WASM and transpilation C/JS/Lua/WASM Data handling Limited via forms, JSON/XML via JS Native data component All flow control features and templating like if or for-each blocks which are typical in frameworks like vue are performed either: As a build step for components if they can be evaluated statically. Via custom elements and are not part of core vs and provide a controlled dynamic behaviour. This comparison is just meant to provide some basic intuition of how things match. Still, the design patterns between vs and more traditional SFC frameworks are quite different. But I want a CSS-like experience! # In theory there is nothing preventing vs to integrate some style equivalent with mixins restructured as CSS-like classes. If you want to do that feel free to send in a PR, I am more than willing to see it integrated. Theming and colors schemes. What can I do? # FLTK, the toolkit on which vs is based, has limited capabilities in this respect. Out of the box, it makes opinionated choices on what and how to render boxes based on their class. Of those only few kinds are embedded in the engine. Hence, both indexed colors and box types have their semantics enforced by FLTK and are globally shared within each process. Given these constraints, one can specify any color or any rendering function for the different frame types (even SVG images). Yet it is not possible to introduce new classes out of thin air. It is possible to define custom draw functions and adopt mixins to override the default style, but doing it more than occasionally would result in some quite messy code. If you need fine and frequent control over your UI, vs is likely not the right framework for you. Don\u2019t we have fluid already for FLTK? # fluid is an excellent tool, but in my opinion it has few problems: The visual editor is nice, but it does not really allow defining custom widgets as standalone and reusable components. At least, not easily enough. It integrates C/C++ code only to \u201cfill in\u201d the missing parts of the application, in a way which I don\u2019t find particularly ergonomic. It does nothing to provide runtime capabilities for the UI beyond what FLTK offers, which is a bit too basic. It is restricted to C/C++, unless you linked your own dynamic library written with a language of choice. Is there any plan to support alternative backends to fltk? # Short answer, no. However, most of the infrastructure and code of this repo has only minimal reliance on fltk. It is possible for most code in this repo to be preserved if a new backend were to be selected. One scenario which might be interesting to consider is lgvl for example. Likely pitfalls # Unlike other runtimes adopting DOM-like structures, vs is not using XML nor its parsed version in memory as the actual UI representation. The XML source is statically compiled into a UI tree, a wrapper/superset of the tree structure that FLTK internally implements, enabling all the higher level features of vs . This means that at runtime the source XML will we de-allocated from memory right after the UI tree is built, and it cannot be trivially referenced again. We also plan in a not-so-far-distant future to use some source XML to generate the equivalent C++ code, and use that to reach a fully native level of performance and a minimal memory consumption. I want my todo list! # How do I create a list which can spawn multiple copies of some component based on runtime data in XML then? You don\u2019t. Components based on XML have several limitations on which mutations are allowed during runtime. A basic principle of this framework is to keep arbitrary code and logic as far away as possible from the final user, and what one sees in code should perfectly match what one visually gets. Making the tree mostly immutable and restricting which operations are allowed in the embedded scripts vibes with this vision of simplicity. In addition to XML components, native ones are also allowed in vs . Native components are written in C++ (or any language which can work with our C bindings) & built dynamically against the full library. Native components cover the same features provided by the XML builder and much more. There is (will be) a library of base native components designed to cover all common scenarios where dynamic data is expected to drive UI changes, but if yours does not fit you will have to write a custom one and ensure its semantics is explicitly encoded as meta-information. Realistically, once vs gets stable enough, the standard library should be plenty for virtually any developer. This way, any dynamic behaviour requiring arbitrary code execution is kept outside the XML tree, in a native codebase which is not controlled by any single developer (unless the final user decides to enable certain native components distributed by third parties). This fits with the design philosophy that there should only one good way to implement a certain feature on the UI front-end. What about templates? # Ok, but being forced to manually write the code for 5x5 buttons on a widget is not really clever. This is what build steps are for! You can generate your XML in react or xslt for example. We are also implementing our own xml preprocessor to statically generate components within the vs viewer itself. Right now vs.templ is working in vs , but not every planned feature according to specs has been implemented yet. How to handle state & state changes? # If the XML is lost, how to I know & query the state of widgets? Not via a DOM structure. In theory FLTK provides an interface to get the current value of its properties from its own widgets, however we decided not to expose it fully. Still, vs widgets can provide some selected computed properties . It should be considered that props in the XML and keys used by FLTK are not a 1-to-1 match, even though we try to keep them as close as possible when reasonable; some complex processing on the input expressions can take place both at compile time and at runtime. None of that is directly reflected in the state of a FLTK widget. Aside from these considerations, we can still keep state, just not explicitly within vs widgets. There are four main approaches, each suited best for a different class of cases. Self mixins # Each vs widget with a frame can specify a self mixin, which internally is just a persisted map of props. Unlike props directly defined on the element itself, at runtime self mixins are persisted throughout the session. Please, be mindful that self mixins will force widgets to have their own frame even if left nameless, significantly raising their memory footprint. Furthermore, mixins operate on objects serialized to strings, making the process of using them more computationally expensive. Still, this also makes them more flexible, as mixins represent expressions to compute and not immediate values. I would like to close with an example showing a typical pitfall in handling state via mixins: <component-a prop-1=\"value-1\"> <mixin prop-2=\"value-2\"> </compoent-a> component-a will be built with its own prop-1 and prop-2 inherited from the self mixin. However, the content of prop-1 is applied & lost after compilation, while prop-2 can be queried at runtime. Mixins can be mutated at runtime as well. but an explicit update request must be triggered onto a component for it to be updated & reflect such changes. nope, we set it dirty and recompute all dirty things after some time no more have been adeded Data sources # Data sources can provide and store values for props. Persistent storage and Secrets are contextual data sources which are always implicitly made available and can be used with the same interface. Within scripts # One should not be surprised that this approach is the least desirable. If you can do differently, please do. One can either have static variables in single users scripts, maps in modules, or have them linked from the back-end. In any case, the mechanism to access these variables is via custom setters and getters . They will effectively appear as props and computed values of the widget they have been defined for and similarly accessed. What is mutable in a runtime instance? # Viewports can be fully redrawn and re-sourced. Props of ui widgets can be freely changed. Exclusions apply to name , frame.* and few more which are reserved for internal use during the ui-tree construction. Mixins can be added, removed or changed. Subtrees can be asked to recompute their style info after these changes. (am I sure I want this?) What is left out: You cannot re-render components imported and used or direct use as their slot designation is lost at runtime. Like all the other mutable pros, the mixin property of a widget can be changes and its previous state is not stored. So you cannot just append or remove parts from it, it must be fully overwritten each time. When you want a widget to be refreshed, its inline props cannot be evaluated again, as that is only available while parsing XML. If you want to avoid this pitfall, keep all of its style in external mixins, and just mutate its mixin list to set the desired visual state. Technical details # How does the rendering work? # It is a process in two stages for each component: The first pass checks for all resources needed and scripts to compile. These sub-tasks are added to a pool and run in parallel. If cached, these results are retrieved. If cache-able, they are stored after computation. Once all resources for a component are resolved, the UI tree is constructed visiting the XML again with a depth-first pass. At the end of this process the XML is freed. XML files are assumed to be fully loaded in memory during processing. However, it is possible to write a streaming parser with much lower memory footprint, as long as the XML is following the strict schema shipped with this repo (it has a rigid order for some tags). This strategy was not employed as it makes the loading process much slower for multithreaded systems with reasonable amounts of memory, and would only be better for low-end embedded systems where fltk is unlikely to be suitable. Licensing # Can I contribute to this project? # Sure! Please be mindful of few things: Make sure you understand that this project uses different licenses for different parts. You should be ok with us including your contributions under those same terms. This project is very early, and your contribution might end up in the crossfire of roadmaps changing and goals shifting. If you want to contribute major features, I would strongly recommend to reach out or to publish some form of written proposal. You should also accept that the CC Attribution\u2013NoDerivs 4.0 covering most of the project will be relaxed at some point. You will be credited, at the very least by preserving the git history of the project. You are clearly able to distribute any standalone contribution you made as you wish. It is your code. What about those parts covered by the no-derivatives clauses? # Those clauses are just intended to protect this project in its early life, not to prevent people from contributing. If your plan is not to make your own fork and distribute an alternative version of vs , we are totally fine with that! Why this strange licence? # You are strange! Jokes aside, I really don\u2019t want this project to be taken apart by sharks before it is able to run on its own legs. Or at the very least, I am trying to make it as hard as legally possible. vs is extremely opinionated, and with opinions come division. XML or JSON, runtime DOM or not, and of course\u2026 data sources or arbitrary fetches in embedded scripts. My reluctance in adopting a less restrictive licence at this stage is well explained in the gemini\u2019s faq . If I had to explain it more with my own words, let\u2019s think about a cost function describing the utility of frameworks like vs . There are many local minima in which such frameworks could end up stuck during development, be it as a necessary but temporary phase or as the unfortunate outcome of short-sighted design decisions. A good vision is the only thing which allows a project to jump across, or at least get quickly out from the local minima of comfort-food. I am not saying my own is \u201cright\u201d nor immutable, just that I have few high-level objectives for this project that others might not share. Allowing vs to be freely forked at this stage comes with the very real risk of me being thrown in a competition I never asked for, unable to provide more than shallow promises on why my intention & my objectives would be \u201cbetter\u201d. As I don\u2019t plan on making the development of this project a painful exercise in demagogy and convincing, I temporarily opted for a licencing model which prevents that. Once this project is robust enough to survive a hostile fork, I would be very glad to relicense it under permissive terms. That being said, if you feel something in the direction of the project or the technical solutions proposed are not good, please reach out! I really appreciate any structured criticism, and I am grateful of any time others might want to put into that. I am not the kind of person which get stuck in their own positions just because they hold them at some point \ud83d\ude0a.","title":"FAQ"},{"location":"faq/#general-questions","text":"While vs shares many of its technologies and ideas with modern SFC frameworks, its design is significantly more opinionated and less free. This document addresses several of the perceived or actual shortcomings, and provides some of the implied rationale.","title":"General questions"},{"location":"faq/#what-is-an-sfc-single-file-component","text":"SFCs are special files encapsulating templates, style and logic of a self-contained UI unit. They first appeared as part of long defunct proposal for native html components & XHTML XSLT components. They are now implemented in modern frameworks like svelte or vue .","title":"What is an SFC (Single File Component)?"},{"location":"faq/#can-we-have-something-like-canvas","text":"No. You are free to add or use a custom native component if you really want. If you don\u2019t really need a full canvas, there is support still for arbitrary SVG files as part of fltk . But canvas-like components are not and will never be part of the core components shipped with vs . Because of that, such capabilities are not meant to be universally accessible by vs users. The reason is that canvas-like components can be abused to replace UI primitives, breaking the semantics on which accessibility tools and robots are relying upon. Furthermore, to be useful we should also allow arbitrary execution of code in embedded scripts that is generally discouraged even when enabled.","title":"Can we have something like &lt;canvas&gt;?"},{"location":"faq/#can-we-have-a-webgpu-opengl-vulkan-context","text":"No, same as for <canvas> . But feel free to wrap a vs UI around a custom vulkan viewport if that fits you application. Be mindful you would need some way to distribute your custom software as it will not be working out of the box for most users.","title":"Can we have a webgpu, opengl, vulkan context?"},{"location":"faq/#why-c-in-embedded-scrips-it-is-unsafe","text":"Yes, you are basically giving all keys to the XML provider to run arbitrary code on your machine. Even if vs is not exposing direct access to the fs or network to embedded scripts, arbitrary C code, once compiled, will be able to do arbitrary things. It is understandable that from the point of view of \u201cweb development\u201d this idea is absurd. But vs is not about web development, its main objective is to provide lightweight native UIs. You can load XML components and resources from the internet & gemini, but you should only accept native components and native scripts from trusted sources, quite possibly some you have control over. Still, that would be not less safe than just compiling and running some random code from github, but for some reason one is more socially accepted. By comparison, QuickJS, Lua and especially WAMR do offer a much more sandboxed experience. In the future it will be possible to set up robust policies based on domains to determine which type of scripts should be allowed if any. For now, there are some coarse environment variables that can be set to fully disable certain features.","title":"Why C in embedded scrips? It is unsafe!"},{"location":"faq/#can-it-be-used-for-fully-standalone-applications","text":"Ideally yes. Broadly speaking there are three \u201cmodes\u201d in which vs can operate: As a fully standalone application. The main issue being the limited selection of functions which are made available in embedded scripts, and their sandboxed nature which only allows specific types of symbols to be exposed and shared. Keep in mind that even while working in C, as unsafe as it is, you are not given direct full access to the standard library; this is deliberate design decision to limit the scope of custom code in scripts. As the front-end of a dynamically linked library which embeds all complex functionalities and provides hooks to the UI in vs . Events triggered from UI will trigger calls to features exposed in your library. Useful for event driven applications, like providing a simple visual front-end to your CLI. As the front-end of a separate process, sharing information via UNIX Domain Sockets. Useful for multi-client applications, or those in which the bulk of the operations are not event driven. It also avoids the need to compile your codebase into a dynamic library, allowing it to interoperate with virtually any runtime. For now, most efforts are focused in making the first two options viable. The third one is planned for later.","title":"Can it be used for fully standalone applications?"},{"location":"faq/#how-to-map-sfc-concepts-to-vs","text":"Concept Web VS Components XML or HTML template XML Static templating XSLT or JSX vs-templ (XSLT-like) Dynamic templating alpine, htmx, jquery, \u2026 Restricted, via standard components Style XSLT and/or CSS and transpilation Mixins Scripting JS, WASM and transpilation C/JS/Lua/WASM Data handling Limited via forms, JSON/XML via JS Native data component All flow control features and templating like if or for-each blocks which are typical in frameworks like vue are performed either: As a build step for components if they can be evaluated statically. Via custom elements and are not part of core vs and provide a controlled dynamic behaviour. This comparison is just meant to provide some basic intuition of how things match. Still, the design patterns between vs and more traditional SFC frameworks are quite different.","title":"How to map SFC concepts to vs?"},{"location":"faq/#but-i-want-a-css-like-experience","text":"In theory there is nothing preventing vs to integrate some style equivalent with mixins restructured as CSS-like classes. If you want to do that feel free to send in a PR, I am more than willing to see it integrated.","title":"But I want a CSS-like experience!"},{"location":"faq/#theming-and-colors-schemes-what-can-i-do","text":"FLTK, the toolkit on which vs is based, has limited capabilities in this respect. Out of the box, it makes opinionated choices on what and how to render boxes based on their class. Of those only few kinds are embedded in the engine. Hence, both indexed colors and box types have their semantics enforced by FLTK and are globally shared within each process. Given these constraints, one can specify any color or any rendering function for the different frame types (even SVG images). Yet it is not possible to introduce new classes out of thin air. It is possible to define custom draw functions and adopt mixins to override the default style, but doing it more than occasionally would result in some quite messy code. If you need fine and frequent control over your UI, vs is likely not the right framework for you.","title":"Theming and colors schemes. What can I do?"},{"location":"faq/#dont-we-have-fluid-already-for-fltk","text":"fluid is an excellent tool, but in my opinion it has few problems: The visual editor is nice, but it does not really allow defining custom widgets as standalone and reusable components. At least, not easily enough. It integrates C/C++ code only to \u201cfill in\u201d the missing parts of the application, in a way which I don\u2019t find particularly ergonomic. It does nothing to provide runtime capabilities for the UI beyond what FLTK offers, which is a bit too basic. It is restricted to C/C++, unless you linked your own dynamic library written with a language of choice.","title":"Don&rsquo;t we have fluid already for FLTK?"},{"location":"faq/#is-there-any-plan-to-support-alternative-backends-to-fltk","text":"Short answer, no. However, most of the infrastructure and code of this repo has only minimal reliance on fltk. It is possible for most code in this repo to be preserved if a new backend were to be selected. One scenario which might be interesting to consider is lgvl for example.","title":"Is there any plan to support alternative backends to fltk?"},{"location":"faq/#likely-pitfalls","text":"Unlike other runtimes adopting DOM-like structures, vs is not using XML nor its parsed version in memory as the actual UI representation. The XML source is statically compiled into a UI tree, a wrapper/superset of the tree structure that FLTK internally implements, enabling all the higher level features of vs . This means that at runtime the source XML will we de-allocated from memory right after the UI tree is built, and it cannot be trivially referenced again. We also plan in a not-so-far-distant future to use some source XML to generate the equivalent C++ code, and use that to reach a fully native level of performance and a minimal memory consumption.","title":"Likely pitfalls"},{"location":"faq/#i-want-my-todo-list","text":"How do I create a list which can spawn multiple copies of some component based on runtime data in XML then? You don\u2019t. Components based on XML have several limitations on which mutations are allowed during runtime. A basic principle of this framework is to keep arbitrary code and logic as far away as possible from the final user, and what one sees in code should perfectly match what one visually gets. Making the tree mostly immutable and restricting which operations are allowed in the embedded scripts vibes with this vision of simplicity. In addition to XML components, native ones are also allowed in vs . Native components are written in C++ (or any language which can work with our C bindings) & built dynamically against the full library. Native components cover the same features provided by the XML builder and much more. There is (will be) a library of base native components designed to cover all common scenarios where dynamic data is expected to drive UI changes, but if yours does not fit you will have to write a custom one and ensure its semantics is explicitly encoded as meta-information. Realistically, once vs gets stable enough, the standard library should be plenty for virtually any developer. This way, any dynamic behaviour requiring arbitrary code execution is kept outside the XML tree, in a native codebase which is not controlled by any single developer (unless the final user decides to enable certain native components distributed by third parties). This fits with the design philosophy that there should only one good way to implement a certain feature on the UI front-end.","title":"I want my todo list!"},{"location":"faq/#what-about-templates","text":"Ok, but being forced to manually write the code for 5x5 buttons on a widget is not really clever. This is what build steps are for! You can generate your XML in react or xslt for example. We are also implementing our own xml preprocessor to statically generate components within the vs viewer itself. Right now vs.templ is working in vs , but not every planned feature according to specs has been implemented yet.","title":"What about templates?"},{"location":"faq/#how-to-handle-state-state-changes","text":"If the XML is lost, how to I know & query the state of widgets? Not via a DOM structure. In theory FLTK provides an interface to get the current value of its properties from its own widgets, however we decided not to expose it fully. Still, vs widgets can provide some selected computed properties . It should be considered that props in the XML and keys used by FLTK are not a 1-to-1 match, even though we try to keep them as close as possible when reasonable; some complex processing on the input expressions can take place both at compile time and at runtime. None of that is directly reflected in the state of a FLTK widget. Aside from these considerations, we can still keep state, just not explicitly within vs widgets. There are four main approaches, each suited best for a different class of cases.","title":"How to handle state &amp; state changes?"},{"location":"faq/#self-mixins","text":"Each vs widget with a frame can specify a self mixin, which internally is just a persisted map of props. Unlike props directly defined on the element itself, at runtime self mixins are persisted throughout the session. Please, be mindful that self mixins will force widgets to have their own frame even if left nameless, significantly raising their memory footprint. Furthermore, mixins operate on objects serialized to strings, making the process of using them more computationally expensive. Still, this also makes them more flexible, as mixins represent expressions to compute and not immediate values. I would like to close with an example showing a typical pitfall in handling state via mixins: <component-a prop-1=\"value-1\"> <mixin prop-2=\"value-2\"> </compoent-a> component-a will be built with its own prop-1 and prop-2 inherited from the self mixin. However, the content of prop-1 is applied & lost after compilation, while prop-2 can be queried at runtime. Mixins can be mutated at runtime as well. but an explicit update request must be triggered onto a component for it to be updated & reflect such changes. nope, we set it dirty and recompute all dirty things after some time no more have been adeded","title":"Self mixins"},{"location":"faq/#data-sources","text":"Data sources can provide and store values for props. Persistent storage and Secrets are contextual data sources which are always implicitly made available and can be used with the same interface.","title":"Data sources"},{"location":"faq/#within-scripts","text":"One should not be surprised that this approach is the least desirable. If you can do differently, please do. One can either have static variables in single users scripts, maps in modules, or have them linked from the back-end. In any case, the mechanism to access these variables is via custom setters and getters . They will effectively appear as props and computed values of the widget they have been defined for and similarly accessed.","title":"Within scripts"},{"location":"faq/#what-is-mutable-in-a-runtime-instance","text":"Viewports can be fully redrawn and re-sourced. Props of ui widgets can be freely changed. Exclusions apply to name , frame.* and few more which are reserved for internal use during the ui-tree construction. Mixins can be added, removed or changed. Subtrees can be asked to recompute their style info after these changes. (am I sure I want this?) What is left out: You cannot re-render components imported and used or direct use as their slot designation is lost at runtime. Like all the other mutable pros, the mixin property of a widget can be changes and its previous state is not stored. So you cannot just append or remove parts from it, it must be fully overwritten each time. When you want a widget to be refreshed, its inline props cannot be evaluated again, as that is only available while parsing XML. If you want to avoid this pitfall, keep all of its style in external mixins, and just mutate its mixin list to set the desired visual state.","title":"What is mutable in a runtime instance?"},{"location":"faq/#technical-details","text":"","title":"Technical details"},{"location":"faq/#how-does-the-rendering-work","text":"It is a process in two stages for each component: The first pass checks for all resources needed and scripts to compile. These sub-tasks are added to a pool and run in parallel. If cached, these results are retrieved. If cache-able, they are stored after computation. Once all resources for a component are resolved, the UI tree is constructed visiting the XML again with a depth-first pass. At the end of this process the XML is freed. XML files are assumed to be fully loaded in memory during processing. However, it is possible to write a streaming parser with much lower memory footprint, as long as the XML is following the strict schema shipped with this repo (it has a rigid order for some tags). This strategy was not employed as it makes the loading process much slower for multithreaded systems with reasonable amounts of memory, and would only be better for low-end embedded systems where fltk is unlikely to be suitable.","title":"How does the rendering work?"},{"location":"faq/#licensing","text":"","title":"Licensing"},{"location":"faq/#can-i-contribute-to-this-project","text":"Sure! Please be mindful of few things: Make sure you understand that this project uses different licenses for different parts. You should be ok with us including your contributions under those same terms. This project is very early, and your contribution might end up in the crossfire of roadmaps changing and goals shifting. If you want to contribute major features, I would strongly recommend to reach out or to publish some form of written proposal. You should also accept that the CC Attribution\u2013NoDerivs 4.0 covering most of the project will be relaxed at some point. You will be credited, at the very least by preserving the git history of the project. You are clearly able to distribute any standalone contribution you made as you wish. It is your code.","title":"Can I contribute to this project?"},{"location":"faq/#what-about-those-parts-covered-by-the-no-derivatives-clauses","text":"Those clauses are just intended to protect this project in its early life, not to prevent people from contributing. If your plan is not to make your own fork and distribute an alternative version of vs , we are totally fine with that!","title":"What about those parts covered by the no-derivatives clauses?"},{"location":"faq/#why-this-strange-licence","text":"You are strange! Jokes aside, I really don\u2019t want this project to be taken apart by sharks before it is able to run on its own legs. Or at the very least, I am trying to make it as hard as legally possible. vs is extremely opinionated, and with opinions come division. XML or JSON, runtime DOM or not, and of course\u2026 data sources or arbitrary fetches in embedded scripts. My reluctance in adopting a less restrictive licence at this stage is well explained in the gemini\u2019s faq . If I had to explain it more with my own words, let\u2019s think about a cost function describing the utility of frameworks like vs . There are many local minima in which such frameworks could end up stuck during development, be it as a necessary but temporary phase or as the unfortunate outcome of short-sighted design decisions. A good vision is the only thing which allows a project to jump across, or at least get quickly out from the local minima of comfort-food. I am not saying my own is \u201cright\u201d nor immutable, just that I have few high-level objectives for this project that others might not share. Allowing vs to be freely forked at this stage comes with the very real risk of me being thrown in a competition I never asked for, unable to provide more than shallow promises on why my intention & my objectives would be \u201cbetter\u201d. As I don\u2019t plan on making the development of this project a painful exercise in demagogy and convincing, I temporarily opted for a licencing model which prevents that. Once this project is robust enough to survive a hostile fork, I would be very glad to relicense it under permissive terms. That being said, if you feel something in the direction of the project or the technical solutions proposed are not good, please reach out! I really appreciate any structured criticism, and I am grateful of any time others might want to put into that. I am not the kind of person which get stuck in their own positions just because they hold them at some point \ud83d\ude0a.","title":"Why this strange licence?"},{"location":"architecture/","text":"","title":"Index"},{"location":"architecture/caching/","text":"TBW","title":"Caching"},{"location":"architecture/pipelines/","text":"Pipelines is the way different backends for scripting are supported in vs . C (native via TCC) # tinycc compiling for native, running C code. JS (quickjs) # quickjs runtime on native, running JS code. Lua (lua/luajit) # lua/luajit runtime on native, running Lua code. External via RPC on UDS # External interface with a different process via unix domain sockets and a remote procedure convention. Any (libriscv) # Several compilers can be distributed as RISCV binaries, so a wide range of languages is possible (in principle) Any (WAMR) # Several compilers can be distributed as wasm-wasi binaries, so a wide range of languages is possible (in principle). In practice the current landscape of WASM support and interoperability sucks\u2026 so nothing will happen there I guess.","title":"Pipelines"},{"location":"architecture/pipelines/#c-native-via-tcc","text":"tinycc compiling for native, running C code.","title":"C (native via TCC)"},{"location":"architecture/pipelines/#js-quickjs","text":"quickjs runtime on native, running JS code.","title":"JS (quickjs)"},{"location":"architecture/pipelines/#lua-lualuajit","text":"lua/luajit runtime on native, running Lua code.","title":"Lua (lua/luajit)"},{"location":"architecture/pipelines/#external-via-rpc-on-uds","text":"External interface with a different process via unix domain sockets and a remote procedure convention.","title":"External via RPC on UDS"},{"location":"architecture/pipelines/#any-libriscv","text":"Several compilers can be distributed as RISCV binaries, so a wide range of languages is possible (in principle)","title":"Any (libriscv)"},{"location":"architecture/pipelines/#any-wamr","text":"Several compilers can be distributed as wasm-wasi binaries, so a wide range of languages is possible (in principle). In practice the current landscape of WASM support and interoperability sucks\u2026 so nothing will happen there I guess.","title":"Any (WAMR)"},{"location":"architecture/storage/","text":"vs is designed to use several types of data storage mechanisms for different entities or applications. None of them is shared across multiple users. memory-storage , mapped in memory. It is session based, meaning that restarting the application will erase it, but its entries can be promoted to other more permanent types of storage. It is used to preserve name resolutions, scripts (not serialized), xml documents (not serialized) and memory buffered resources like script sources or images. The same name can be used to store different variations of the same entity. For example a name resolution the script source and the final script object. kv-storage , mapped in the SQLite database. It is used to preserve the state of an application and, more in general, information which is not for deletion over multiple sessions. However, it is possible to specify a deadline for entries to be removed. res-storage , mapped in the SQLite database. Similar to the previous type of storage, however this one is specifically designed to preserve certain types of resources after promotion from the memory storage. Things like remote content which has been collected once already. Things stored in this storage can be deleted at any point if the current policies on disk usage are violated. secrets , mapped in the SQLite database. It is used to preserve data which is relevant to a certain application, but also how to share it with others. The XML profiles, stored on disk but loaded on memory when running vs . logs , mapped in the SQLite database. Rotated and deletable if disk usage policies are violated. bookmarks , mapped in the SQLite database. Permanent. They can be both automatically added based on history, or on direct user actions. policies , mapped in the SQLite database. An extension of the XML profiles, storing detailed policy information for each application which has exceptions.","title":"Storage"},{"location":"developers/","text":"Resources for developers # How to build vs , use containers and binary distributions. Information about contributing to vs . Conventions for versioning . How to publish a new release . Full specifications of vs .","title":"Index"},{"location":"developers/#resources-for-developers","text":"How to build vs , use containers and binary distributions. Information about contributing to vs . Conventions for versioning . How to publish a new release . Full specifications of vs .","title":"Resources for developers"},{"location":"developers/building/","text":"Important It was decided that distribution & building will be split. Distribution is to be handled here , while everything build-related stays. Docker images are excluded, as they are meant for developers of vs , not distribution of the final runtime. Supported platforms # At the moment, only Linux is supported for building and running vs as its primary target. It is likely that all major CPU architectures are supported, and several POSIX systems can also be targetted. This is just temporary limitation, as all dependencies being used by this project are highly portable, but my own code and the build system are probably not. Platform Arch Building Running debian-trixie amd64 \u2705 \u2705 debian-trixie arm64 \u2753 \u2753 debian-trixie risc64 \u2753 \u2753 freedektop-24.08 amd64 \u2705* \u2705* macos-13 amd64 \u2753 \u2753 macos-14 arm64 \u2705 \u2753 win64 amd64 \u274c \u2753 In addition to this, the building environment is also distributed via docker images. Distribution # There are plans to distribute both stable and nightly releases of vs. Please, be mindful that nightly releases can be extremely broken, and for safety reasons they will only be offered as flatpaks. Distribution formats which are supported: flatpak targetting the latest stable freedesktop environment Distribution formats which are expected to be supported (at some point): deb for the latest stable and experimental of debian (multiarch) aur for arch linux and derivatives brew for macos Installing directly via meson is very much not suggested if you don\u2019t want to break your system. Configuration flags # Configuration flags, like for any meson project, are in meson.options . In brief, you can disable most features of the runtime if you so wish. This can be good to meet specific safety targets by removing some available options, or to optimize it on embedded applications where the overhead of some parts might be excessive. Builds distributed from this repository are based on the default options unless explicitly specified. Building requirements # You will need a proper Linux environment, with a modern C++ toolchain installed. Specifically, I suggest clang-19 or higher, as this repo is using modern C23 features like #embed to make everyone\u2019s (my) life a bit easier. In addition to that, this repo makes use of: meson as its main build system. Any recent-ish version will do (unless you want zig to simplify cross-compiling; for that, >= 1.60 is needed) bun as the ts/js runtime to support all the code generation tasks and some of the more complex pipelines. I hate bash, and this is what replaces it for any complex task. swiftc barely used for now, but many of the native components shipped within vs will be written in swift (or so I am planning). Version 6 or higher is needed. FLTK # If your system provides a modern version of fltk>=1.4 , that will be used by default. If not present, you are likely needing few more dependencies depending on your distribution. On debian-like systems the followings are needed: libpng-dev libglu1-mesa-dev libpango1.0-dev There are also some more or less optional dependencies: libcurl-dev , unless you are trying to compile a custom version without network support, or http only which are supported. gnuplot if you want to generate plots from testing & benchmarking reports. flatpak-builder if you plan on packing and distributing a flatpak of vs (usually not needed, read more about it later in this document) Additional documentation # To generate the additional documentation for distribution and consumption: mkdocs and several packages for themes and extensions. mkdocs mkdocs-github-admonitions-plugin more to be documented doxygen for documentation generated from the code itself. IDE integrations # There is an ongoing effort to better support vs with a proper lsp . In the same repo there is also a vscode client extension. vs is expected to leverage this LSP directly in its embedded editor once integrated. Docker # A docker image is available that automatically covers all the build dependencies. See docker/README.md for further documentation. Building process # Note This project uses meson, so there are no git submodules for the most part. One exception is made for flatpak-builder to be usable, but it is being deprecated. If you plan on using it to generate new flatpak images, please ensure submodules are also cloned with the rest of the repository. Start by installing all the bun dependencies needed: bun install Then run the following NPM scripts: bun run codegen #Initial codegen from schemas bun run meson-setup.release #Set up the meson build directory. bun run meson-build #Build everything! You might want to use meson-setup.clang-release to use clang-19 if found on your system, and your default compiler or choice might not support some modern functions used in this project. To perform tests and benchmarks: bun run test bun run benchmark To run the dev demo where features under development are usually being tested: bun run vs.example Installation # Warning Don\u2019t install it via meson install ... without a custom DESTDIR set, as shown by its wrapper in package.json script. Some library names will most surely clash with those already installed on your system, and will be overridden. Or future system updates might break vs . Also consider https://github.com/KaruroChori/vs-fltk/issues/3 and its impact. vs.fltk is using very recent versions which have not been rolled out yet in most distribution. Or even worse, custom forks. bun run meson-install is now implemented & tested. By default, it installs everything in ./build/dist . Flatpak # Important Flatpak in this repos is being deprecated. It will be fully relocated and removed from here before v0.2.1. Note You need a modern version of flatpak-builder to be installed. Some EOL or LTS will not ship with one. Anything > 1.4 should be ok. Also, make sure your runtime is not using a cmake version in $[3.31.0,3.31.2)$. A regression later fixed prevents building cmake via meson. Tracked here . Flatpak is not really the ideal approach to deliver vs due to the intrinsic cost of having a separate runtime already installed on each system. Also, its sandboxing & permission system might raise some issues (but also help to mitigate the current lack of safety features). Still, it is good to support it at these early stages, since many libraries & build dependencies are bleeding-edge, and other forms of distribution are not as convenient. flatpak --user remote-add --if-not-exists flathub https://flathub.org/repo/flathub.flatpakrepo if you never configured --user on your system. Then bun run codegen #If not run already bun run flatpak-builder","title":"Building"},{"location":"developers/building/#supported-platforms","text":"At the moment, only Linux is supported for building and running vs as its primary target. It is likely that all major CPU architectures are supported, and several POSIX systems can also be targetted. This is just temporary limitation, as all dependencies being used by this project are highly portable, but my own code and the build system are probably not. Platform Arch Building Running debian-trixie amd64 \u2705 \u2705 debian-trixie arm64 \u2753 \u2753 debian-trixie risc64 \u2753 \u2753 freedektop-24.08 amd64 \u2705* \u2705* macos-13 amd64 \u2753 \u2753 macos-14 arm64 \u2705 \u2753 win64 amd64 \u274c \u2753 In addition to this, the building environment is also distributed via docker images.","title":"Supported platforms"},{"location":"developers/building/#distribution","text":"There are plans to distribute both stable and nightly releases of vs. Please, be mindful that nightly releases can be extremely broken, and for safety reasons they will only be offered as flatpaks. Distribution formats which are supported: flatpak targetting the latest stable freedesktop environment Distribution formats which are expected to be supported (at some point): deb for the latest stable and experimental of debian (multiarch) aur for arch linux and derivatives brew for macos Installing directly via meson is very much not suggested if you don\u2019t want to break your system.","title":"Distribution"},{"location":"developers/building/#configuration-flags","text":"Configuration flags, like for any meson project, are in meson.options . In brief, you can disable most features of the runtime if you so wish. This can be good to meet specific safety targets by removing some available options, or to optimize it on embedded applications where the overhead of some parts might be excessive. Builds distributed from this repository are based on the default options unless explicitly specified.","title":"Configuration flags"},{"location":"developers/building/#building-requirements","text":"You will need a proper Linux environment, with a modern C++ toolchain installed. Specifically, I suggest clang-19 or higher, as this repo is using modern C23 features like #embed to make everyone\u2019s (my) life a bit easier. In addition to that, this repo makes use of: meson as its main build system. Any recent-ish version will do (unless you want zig to simplify cross-compiling; for that, >= 1.60 is needed) bun as the ts/js runtime to support all the code generation tasks and some of the more complex pipelines. I hate bash, and this is what replaces it for any complex task. swiftc barely used for now, but many of the native components shipped within vs will be written in swift (or so I am planning). Version 6 or higher is needed.","title":"Building requirements"},{"location":"developers/building/#fltk","text":"If your system provides a modern version of fltk>=1.4 , that will be used by default. If not present, you are likely needing few more dependencies depending on your distribution. On debian-like systems the followings are needed: libpng-dev libglu1-mesa-dev libpango1.0-dev There are also some more or less optional dependencies: libcurl-dev , unless you are trying to compile a custom version without network support, or http only which are supported. gnuplot if you want to generate plots from testing & benchmarking reports. flatpak-builder if you plan on packing and distributing a flatpak of vs (usually not needed, read more about it later in this document)","title":"FLTK"},{"location":"developers/building/#additional-documentation","text":"To generate the additional documentation for distribution and consumption: mkdocs and several packages for themes and extensions. mkdocs mkdocs-github-admonitions-plugin more to be documented doxygen for documentation generated from the code itself.","title":"Additional documentation"},{"location":"developers/building/#ide-integrations","text":"There is an ongoing effort to better support vs with a proper lsp . In the same repo there is also a vscode client extension. vs is expected to leverage this LSP directly in its embedded editor once integrated.","title":"IDE integrations"},{"location":"developers/building/#docker","text":"A docker image is available that automatically covers all the build dependencies. See docker/README.md for further documentation.","title":"Docker"},{"location":"developers/building/#building-process","text":"Note This project uses meson, so there are no git submodules for the most part. One exception is made for flatpak-builder to be usable, but it is being deprecated. If you plan on using it to generate new flatpak images, please ensure submodules are also cloned with the rest of the repository. Start by installing all the bun dependencies needed: bun install Then run the following NPM scripts: bun run codegen #Initial codegen from schemas bun run meson-setup.release #Set up the meson build directory. bun run meson-build #Build everything! You might want to use meson-setup.clang-release to use clang-19 if found on your system, and your default compiler or choice might not support some modern functions used in this project. To perform tests and benchmarks: bun run test bun run benchmark To run the dev demo where features under development are usually being tested: bun run vs.example","title":"Building process"},{"location":"developers/building/#installation","text":"Warning Don\u2019t install it via meson install ... without a custom DESTDIR set, as shown by its wrapper in package.json script. Some library names will most surely clash with those already installed on your system, and will be overridden. Or future system updates might break vs . Also consider https://github.com/KaruroChori/vs-fltk/issues/3 and its impact. vs.fltk is using very recent versions which have not been rolled out yet in most distribution. Or even worse, custom forks. bun run meson-install is now implemented & tested. By default, it installs everything in ./build/dist .","title":"Installation"},{"location":"developers/building/#flatpak","text":"Important Flatpak in this repos is being deprecated. It will be fully relocated and removed from here before v0.2.1. Note You need a modern version of flatpak-builder to be installed. Some EOL or LTS will not ship with one. Anything > 1.4 should be ok. Also, make sure your runtime is not using a cmake version in $[3.31.0,3.31.2)$. A regression later fixed prevents building cmake via meson. Tracked here . Flatpak is not really the ideal approach to deliver vs due to the intrinsic cost of having a separate runtime already installed on each system. Also, its sandboxing & permission system might raise some issues (but also help to mitigate the current lack of safety features). Still, it is good to support it at these early stages, since many libraries & build dependencies are bleeding-edge, and other forms of distribution are not as convenient. flatpak --user remote-add --if-not-exists flathub https://flathub.org/repo/flathub.flatpakrepo if you never configured --user on your system. Then bun run codegen #If not run already bun run flatpak-builder","title":"Flatpak"},{"location":"developers/contributing/","text":"Structure of the repo # src where most of the source for vs.app and the vs.fltk library are located. include like before for the header files. Directories mostly mirrors what is in src . schemas high level specs, main source of information for documentation and automatic code-gen. commons extra public files part of every vs distribution (some of them are auto-generated). docs & examples : this documentation & and all examples. As part of the build process, they are shipped as part of the commons. bindings bindings for all languages supported in embedded script . test & benchmark : test suite & benchmarks for vs & the vs.fltk library. scripts utility scripts (mostly in TS/JS) to handle code generation, the build process and some workflows. experiments playground where new ideas or semi-standalone prototypes are tested. metadata information for distribution (icons, manifest files etc.). dist most of these files are automatically generated and not tracked, the rest of them are needed to distribute the final website with docs. docker anything related to the docker images used to build vs . Language & format guidelines # Variables of environment # They are frequently used for both benchmarks and tests . They can also be useful for the developer while testing new functionality, so they have been all covered in here for reference. Logging # Debug logging # vs has some features to simplify debugging, mostly to support automatic tests and benchmarks, but they might be useful in other scenarios as well. vs::globals::debug is responsible for that, and it is exposed in several ways: within embedded scripts via a special xml debug tag in the vs.fltk C interface as well While using it you can define a key and value. The current timestamp at nanoseconds resolution is also automatically recorded. Records are saved to a file with name VS_DEBUG_FILE if set, otherwise no output will be emitted. Older content is destroyed. The file format is just a simple CSV with horizontal tabs as separator of fields and newlines for rows. The order is key , value & timestamp . vs::globals::debug should not be confused with the ordinary logging functions which are also exposed in similar ways, but which are generally contextual and they mostly output to stdout . Testing & Benchmarking # Static build tests for vs to ensure it can be compiled on all and for all supported platforms. Static tests/benchmarks on vs.fltk functionalities provided by the library, like path resolution, mixin logic etc. Runtime tests/benchmarks on vs in headless mode with automatic actions, with optional memory profiling. Runtime tests on vs with a headless x11 server to obtain screenshot to highlight possible visual regressions. Testing features of the vs-fltk library # Memory profile of vs # Benchmarking features of the vs-fltk library # Runtime tests in vs # Supported actions are described in here . Programming guidelines # About exceptions # Exceptions are fully allowed in the CLI at /src/app . However, they are strongly discouraged anywhere else in the library code, and it is possible they will be fully disabled via -fno-exceptions at some point. The main reason is that the UI should be fault-tolerant and provide as much functionality as possible even if parts of it are broken, like malformed XML files, some scripts failing compilation, missing resources and so on. Exceptions, in this sense, are internally handled and semantically supported by providing subtrees to be rendered in case of failure events. Exceptions should only be used in those cases when the application must stop, either because the error is not recoverable or because it would leave the rest of the application in an inconsistent state. Memory allocations # As for memory allocations, spawning small dynamic objects is also discouraged. If possible, stack allocations are a better alternative. Arrays with variable length on stack are totally fine to be used in place of local objects allocated on heap. std::string is also highly discouraged, make sure std::string_view is used instead whenever possible. About log levels # Internally these are the log levels supported and their relative semantics: INFO to present informational messages, often as a result of user requests OK to notify that a certain operation completed successfully. WARNING to notify that a certain operation was not able to fully succeed, something should be fixed, but everything is fine. CONTINUE to notify that a certain operation was skipped by design. PANIC to notify that a certain operation failed in a way which cannot be recovered (but the application can still run) LOG to introduce a log without any further connotation. For example, loading a remote resource: If the file was already cached, a continue message will be notified If no proper answer has been received from the remote host, a panic message is generated, since that content cannot be recovered If everything loaded fine, an ok message can be used If the component is using features which are not allowed by policies, warning messages can be generated. Log levels are: NORMAL to be emitted when running the program normally SILENT to be emitted when running the program even in silent mode VERBOSE to be emitted when running the program in verbose mode only DEBUG to be emitted always when running a debug build or in debugging mode. Each message must specify their semantic type and log level (normal by default). Usually: panic messages have a silent log level ok and continue messages are usually verbose info , warning and log are usually normal Documentation # Documentation is written in markdown. Files within docs will be shipped with vs and are expected to read by the internal markdown component. As such: They must be written in CommonMark (with some possible extensions like the block headers for notices or warnings). They shall not include HTML within them. XML will be parsed as normal vs code. Files which are written in markdown, but are outside the docs , can follow a more relaxed format and target github/gitlab extensions for visualization.","title":"Contributing"},{"location":"developers/contributing/#structure-of-the-repo","text":"src where most of the source for vs.app and the vs.fltk library are located. include like before for the header files. Directories mostly mirrors what is in src . schemas high level specs, main source of information for documentation and automatic code-gen. commons extra public files part of every vs distribution (some of them are auto-generated). docs & examples : this documentation & and all examples. As part of the build process, they are shipped as part of the commons. bindings bindings for all languages supported in embedded script . test & benchmark : test suite & benchmarks for vs & the vs.fltk library. scripts utility scripts (mostly in TS/JS) to handle code generation, the build process and some workflows. experiments playground where new ideas or semi-standalone prototypes are tested. metadata information for distribution (icons, manifest files etc.). dist most of these files are automatically generated and not tracked, the rest of them are needed to distribute the final website with docs. docker anything related to the docker images used to build vs .","title":"Structure of the repo"},{"location":"developers/contributing/#language-format-guidelines","text":"","title":"Language &amp; format guidelines"},{"location":"developers/contributing/#variables-of-environment","text":"They are frequently used for both benchmarks and tests . They can also be useful for the developer while testing new functionality, so they have been all covered in here for reference.","title":"Variables of environment"},{"location":"developers/contributing/#logging","text":"","title":"Logging"},{"location":"developers/contributing/#debug-logging","text":"vs has some features to simplify debugging, mostly to support automatic tests and benchmarks, but they might be useful in other scenarios as well. vs::globals::debug is responsible for that, and it is exposed in several ways: within embedded scripts via a special xml debug tag in the vs.fltk C interface as well While using it you can define a key and value. The current timestamp at nanoseconds resolution is also automatically recorded. Records are saved to a file with name VS_DEBUG_FILE if set, otherwise no output will be emitted. Older content is destroyed. The file format is just a simple CSV with horizontal tabs as separator of fields and newlines for rows. The order is key , value & timestamp . vs::globals::debug should not be confused with the ordinary logging functions which are also exposed in similar ways, but which are generally contextual and they mostly output to stdout .","title":"Debug logging"},{"location":"developers/contributing/#testing-benchmarking","text":"Static build tests for vs to ensure it can be compiled on all and for all supported platforms. Static tests/benchmarks on vs.fltk functionalities provided by the library, like path resolution, mixin logic etc. Runtime tests/benchmarks on vs in headless mode with automatic actions, with optional memory profiling. Runtime tests on vs with a headless x11 server to obtain screenshot to highlight possible visual regressions.","title":"Testing &amp; Benchmarking"},{"location":"developers/contributing/#testing-features-of-the-vs-fltk-library","text":"","title":"Testing features of the vs-fltk library"},{"location":"developers/contributing/#memory-profile-of-vs","text":"","title":"Memory profile of vs"},{"location":"developers/contributing/#benchmarking-features-of-the-vs-fltk-library","text":"","title":"Benchmarking features of the vs-fltk library"},{"location":"developers/contributing/#runtime-tests-in-vs","text":"Supported actions are described in here .","title":"Runtime tests in vs"},{"location":"developers/contributing/#programming-guidelines","text":"","title":"Programming guidelines"},{"location":"developers/contributing/#about-exceptions","text":"Exceptions are fully allowed in the CLI at /src/app . However, they are strongly discouraged anywhere else in the library code, and it is possible they will be fully disabled via -fno-exceptions at some point. The main reason is that the UI should be fault-tolerant and provide as much functionality as possible even if parts of it are broken, like malformed XML files, some scripts failing compilation, missing resources and so on. Exceptions, in this sense, are internally handled and semantically supported by providing subtrees to be rendered in case of failure events. Exceptions should only be used in those cases when the application must stop, either because the error is not recoverable or because it would leave the rest of the application in an inconsistent state.","title":"About exceptions"},{"location":"developers/contributing/#memory-allocations","text":"As for memory allocations, spawning small dynamic objects is also discouraged. If possible, stack allocations are a better alternative. Arrays with variable length on stack are totally fine to be used in place of local objects allocated on heap. std::string is also highly discouraged, make sure std::string_view is used instead whenever possible.","title":"Memory allocations"},{"location":"developers/contributing/#about-log-levels","text":"Internally these are the log levels supported and their relative semantics: INFO to present informational messages, often as a result of user requests OK to notify that a certain operation completed successfully. WARNING to notify that a certain operation was not able to fully succeed, something should be fixed, but everything is fine. CONTINUE to notify that a certain operation was skipped by design. PANIC to notify that a certain operation failed in a way which cannot be recovered (but the application can still run) LOG to introduce a log without any further connotation. For example, loading a remote resource: If the file was already cached, a continue message will be notified If no proper answer has been received from the remote host, a panic message is generated, since that content cannot be recovered If everything loaded fine, an ok message can be used If the component is using features which are not allowed by policies, warning messages can be generated. Log levels are: NORMAL to be emitted when running the program normally SILENT to be emitted when running the program even in silent mode VERBOSE to be emitted when running the program in verbose mode only DEBUG to be emitted always when running a debug build or in debugging mode. Each message must specify their semantic type and log level (normal by default). Usually: panic messages have a silent log level ok and continue messages are usually verbose info , warning and log are usually normal","title":"About log levels"},{"location":"developers/contributing/#documentation","text":"Documentation is written in markdown. Files within docs will be shipped with vs and are expected to read by the internal markdown component. As such: They must be written in CommonMark (with some possible extensions like the block headers for notices or warnings). They shall not include HTML within them. XML will be parsed as normal vs code. Files which are written in markdown, but are outside the docs , can follow a more relaxed format and target github/gitlab extensions for visualization.","title":"Documentation"},{"location":"developers/releasing/","text":"Todo list for releases # Ideally all these steps should be made automatic when a release request is triggered. But for now they are not, so use this as a checklist for reference: Make sure tests are all passing with the current commit (locally). Update the version number in package.json to the next odd revision. Clear content in TODO.md . Make sure RELEASE.md is up to date. Copy it in ./docs/releases/ using the version name as filename. Run the full codegen step. Commit & push. Double check CI are good. Prepare a tagged release on github. This will trigger the construction of all artifacts. Docker images Full source archive including subprojects to fix their version After release: Update the version number in meson.build and package.json to the next even revision. Clear content in RELEASE.md Manually trigger a release for distribution on the other repository by tagging a new version under the same number. This will generate: Deb packages Flatpak et cetera","title":"Releasing"},{"location":"developers/releasing/#todo-list-for-releases","text":"Ideally all these steps should be made automatic when a release request is triggered. But for now they are not, so use this as a checklist for reference: Make sure tests are all passing with the current commit (locally). Update the version number in package.json to the next odd revision. Clear content in TODO.md . Make sure RELEASE.md is up to date. Copy it in ./docs/releases/ using the version name as filename. Run the full codegen step. Commit & push. Double check CI are good. Prepare a tagged release on github. This will trigger the construction of all artifacts. Docker images Full source archive including subprojects to fix their version After release: Update the version number in meson.build and package.json to the next even revision. Clear content in RELEASE.md Manually trigger a release for distribution on the other repository by tagging a new version under the same number. This will generate: Deb packages Flatpak et cetera","title":"Todo list for releases"},{"location":"developers/todo/","text":"Missing for release 0.1.1 # Scripts # turn off (for now) app linking capabilities Make all paths being used by the c and js pipeline portable. Setup github actions # ? To run tests and save its reports on some backend ? To run benchmarks and save its reports on some backend (variable system load will destroy performance metrics?) ? To run the full flatpak-builder. For referencehttps://github.com/flatpak/flatpak-github-actions Current # All these notes should be progressively removed from here and recorded as github issues. XSD -> RNG? # XSD as an XML schema format is not that good. RelaxNG better captures the flexible nature of vs files, so I would be better off considering it as I did for vs.templ already. Loading XML issues # [INFO] : Loading component file://./two-buttons.xml @ [/app/fl:window/TwoButtons] [INFO] : Requested loading of file `file://./two-buttons.xml` [PANIC] : Oh no! Loading failed `file://./two-buttons.xml` for 2 [INFO] : Loading failed, file cannot be opened file://./two-buttons.xml @ [/app/fl:window/TwoButtons] At times it fails, at times it does not. Investigate and check against syntax in specs. <import src=\"this://two-buttons.xml\" as=\"TwoButtons\" /> works but <import src=\"file://./two-buttons.xml\" as=\"TwoButtons\" /> does not somehow. But just ./two-buttons.xml does? Check why! Infrastructural # Add namespaces for vs elements and fltk elements Expose some sort of inverse for apply_prop, where selected fields can be read from a widget. (?) Add special inherit value to props to remove the current one and let it be computed based on its parents? I have to decide if we want this one. Serialize the current UI structure in some format to be consumed by other services (AI assistants, speech dispatcher etc) Add pipelines for compilation & testing on github/gitea Basic LSP for the vs syntax. Implementation @ https://github.com/KaruroChori/vs-fltk-lsp Make some dependencies and their related features toggleable at build-time (tcc, quickjs, lua, wamr). Decide what to do about swift. I probably want https://github.com/fmtlib/fmt Signal/event propagation mechanisms Add special logging to generate output used by more complex tests. They must also be exposed to scripts. These logs are only recorded if VS_DEBUG_FILE is set to a file name, and will result in a key,value dictionary which is later checked against reference as part of the test. Namespace support In the root of app or components search for xmlns attributes, and define local namespaces based on vs , vs.templ & vs.fltk . Codegen for reserved elements & attributes in the vs namespace. Like for vs.fltk . Evaluate and check if possible to replace sqlite with https://github.com/tursodatabase/libsql as it looks like the better (it supports alteration of foreign keys for example) Installation! Rewrite TS stuff in meson directly Update internal paths to work in both build and installed mode. Man page deb (mounted on opt, as most dependencies are needed recent and potentially forked) flatpak Swift6 is added, but meson cannot find swiftc. Why? Unable to append args to meson setup Escape vs_debug (tabs). Add TESTING flag in scripts to determine if some content should be run or not. Add contextual information in app and component (keys, policies & paths). Remove them from ui_tree as they can be accessed via root. Once that is done, properly implement the path type for props, to resolve correctly. Scripting # Expose path and the fetcher to embedded script at some degree. Make errors in C scripts less useless Add #line to C library to properly count lines for error location Support for compact scripts C script JS script Components # Enable codegen Simplify codegen for all computed/props types which are not raw by writing more or the boilerplate. and port the current code over the new codegen architecture. Viewport element. Fix on.failure and on.loading to match specs in use element. Add properties on containers to set their type/mode whatever. Split align property Split font property Add debug component Paths # Extend support for more virtual paths (all but those based on sqlite which will be handled later on) Dynamic Library linking # Add support of loading of so/dylib/dll modules Test linking On http/s & gemini (the cache is now generic) Without libc? If nobuiltin is not usable, I need to add more of libtcc to meson targets. Fix building process of tcc to generate the minimal libraries needed. Policies # Add support for env variables to fully disable native code, internet access and to run headless. Once profiles are ready this will be obsoleted, but for now I need for testing and to let people use it \u201csafely\u201d Policies are so complex to write manually and very easy to mess them up. Maybe code generation starting from a schema might be a better option. Support basic embedded script policies. Caching # Caching all done (no SQLITE, for that there is a different milestone) Source files From fs From network Pugi XML documents Cache support Save XML trees while parsing Scripts Caching all done (SQLITE part) kv res secrets DB schemas Props, computed, getters and setters # I would like to implement an architectural change how these concepts are handled. Schemas will be defining objects for which getters and setters are defined. Some component might allow for arbitrary definitions (already the case for the dispatcher which could be recycled), but most are fixed. Props are just calls to setters for which expression evaluation from a string is available. They are just an artifact of XML components, native ones for the most part are only going to use getters and setters directly. It is also possible to mark specific objects as persistent . Those will be recorded as secrets & recovered if so desired. It is also possible to mark specific objects as semantic . Those will be reported in the serialization. Supported environments # TCC # Add basic support for TCC Provide extensive bindings for TCC Stage 0 Stage 1 Full subset of libc Stage 2 Full interface for ui tree operations UI base support of module scripts UI base support of getters/setters. Add an alternative backend like Cello Add an alternative backend like Vala (?) All done for now WASM/WASI # Why is WASM so frustrating to work with!?! No compiler can compile itself into a wasm/wasi binary. AssemblyScript is a mess that is barely able to generate itself with WASI, but still it requires binaryen distributed alongside. Because of a series of requirements, V8 is basically the only runtime capable of running that combo. An all LLVM versions for wasm/wasi I tried were failures (or half so). I am starting to regret java bytecode already. Notice: the wasmer registry seems to have a small collection of clang builds on it. It might be good enough to start experimenting. https://wasmer.io/taybenlor/runno-clang Integrate an engine (WAMR) Find a way to have llvm/clang running as wasm an build to wasm (no emscripten) cannot do that Find a way to integrate assemblyscript as a language and embeding the compiler ahah. not working QuickJS # Add quickjs to the repo Add basic support for quickjs embedded scripts. UI base support of module scripts Support of getters and setters LUA # Add Lua & LuaJIT to the repo Add baseline support for Lua embedded scripts. Unclassified # General # Refactor the ui_tree to better handle different classes of components Prepare infrastructure for codegen (no impl yet) Move all the tcc stuff in proper pipelines Add more components to play with For speed of development, many operations are written recursively. The stack is pretty limited, so either there is tail recursion or stacks in heap must be used. Add caching & preloading to avoid making the process of building UI dog slow. Partial implementation to support modules Partial implementation to load resources in memory within the session (they might be promoted once SQLITE gets integrated) References for FFI & Lua # https://github.com/shajunxing/quickjs-ffi https://github.com/q66/cffi-lua https://github.com/LuaJIT/LuaJIT http://lua-users.org/wiki/SimpleLuaApiExample Probably I will allow switching between Lua & LuaJIT with a compile flag.","title":"Todo"},{"location":"developers/todo/#missing-for-release-011","text":"","title":"Missing for release 0.1.1"},{"location":"developers/todo/#scripts","text":"turn off (for now) app linking capabilities Make all paths being used by the c and js pipeline portable.","title":"Scripts"},{"location":"developers/todo/#setup-github-actions","text":"? To run tests and save its reports on some backend ? To run benchmarks and save its reports on some backend (variable system load will destroy performance metrics?) ? To run the full flatpak-builder. For referencehttps://github.com/flatpak/flatpak-github-actions","title":"Setup github actions"},{"location":"developers/todo/#current","text":"All these notes should be progressively removed from here and recorded as github issues.","title":"Current"},{"location":"developers/todo/#xsd-rng","text":"XSD as an XML schema format is not that good. RelaxNG better captures the flexible nature of vs files, so I would be better off considering it as I did for vs.templ already.","title":"XSD -&gt; RNG?"},{"location":"developers/todo/#loading-xml-issues","text":"[INFO] : Loading component file://./two-buttons.xml @ [/app/fl:window/TwoButtons] [INFO] : Requested loading of file `file://./two-buttons.xml` [PANIC] : Oh no! Loading failed `file://./two-buttons.xml` for 2 [INFO] : Loading failed, file cannot be opened file://./two-buttons.xml @ [/app/fl:window/TwoButtons] At times it fails, at times it does not. Investigate and check against syntax in specs. <import src=\"this://two-buttons.xml\" as=\"TwoButtons\" /> works but <import src=\"file://./two-buttons.xml\" as=\"TwoButtons\" /> does not somehow. But just ./two-buttons.xml does? Check why!","title":"Loading XML issues"},{"location":"developers/todo/#infrastructural","text":"Add namespaces for vs elements and fltk elements Expose some sort of inverse for apply_prop, where selected fields can be read from a widget. (?) Add special inherit value to props to remove the current one and let it be computed based on its parents? I have to decide if we want this one. Serialize the current UI structure in some format to be consumed by other services (AI assistants, speech dispatcher etc) Add pipelines for compilation & testing on github/gitea Basic LSP for the vs syntax. Implementation @ https://github.com/KaruroChori/vs-fltk-lsp Make some dependencies and their related features toggleable at build-time (tcc, quickjs, lua, wamr). Decide what to do about swift. I probably want https://github.com/fmtlib/fmt Signal/event propagation mechanisms Add special logging to generate output used by more complex tests. They must also be exposed to scripts. These logs are only recorded if VS_DEBUG_FILE is set to a file name, and will result in a key,value dictionary which is later checked against reference as part of the test. Namespace support In the root of app or components search for xmlns attributes, and define local namespaces based on vs , vs.templ & vs.fltk . Codegen for reserved elements & attributes in the vs namespace. Like for vs.fltk . Evaluate and check if possible to replace sqlite with https://github.com/tursodatabase/libsql as it looks like the better (it supports alteration of foreign keys for example) Installation! Rewrite TS stuff in meson directly Update internal paths to work in both build and installed mode. Man page deb (mounted on opt, as most dependencies are needed recent and potentially forked) flatpak Swift6 is added, but meson cannot find swiftc. Why? Unable to append args to meson setup Escape vs_debug (tabs). Add TESTING flag in scripts to determine if some content should be run or not. Add contextual information in app and component (keys, policies & paths). Remove them from ui_tree as they can be accessed via root. Once that is done, properly implement the path type for props, to resolve correctly.","title":"Infrastructural"},{"location":"developers/todo/#scripting","text":"Expose path and the fetcher to embedded script at some degree. Make errors in C scripts less useless Add #line to C library to properly count lines for error location Support for compact scripts C script JS script","title":"Scripting"},{"location":"developers/todo/#components","text":"Enable codegen Simplify codegen for all computed/props types which are not raw by writing more or the boilerplate. and port the current code over the new codegen architecture. Viewport element. Fix on.failure and on.loading to match specs in use element. Add properties on containers to set their type/mode whatever. Split align property Split font property Add debug component","title":"Components"},{"location":"developers/todo/#paths","text":"Extend support for more virtual paths (all but those based on sqlite which will be handled later on)","title":"Paths"},{"location":"developers/todo/#dynamic-library-linking","text":"Add support of loading of so/dylib/dll modules Test linking On http/s & gemini (the cache is now generic) Without libc? If nobuiltin is not usable, I need to add more of libtcc to meson targets. Fix building process of tcc to generate the minimal libraries needed.","title":"Dynamic Library linking"},{"location":"developers/todo/#policies","text":"Add support for env variables to fully disable native code, internet access and to run headless. Once profiles are ready this will be obsoleted, but for now I need for testing and to let people use it \u201csafely\u201d Policies are so complex to write manually and very easy to mess them up. Maybe code generation starting from a schema might be a better option. Support basic embedded script policies.","title":"Policies"},{"location":"developers/todo/#caching","text":"Caching all done (no SQLITE, for that there is a different milestone) Source files From fs From network Pugi XML documents Cache support Save XML trees while parsing Scripts Caching all done (SQLITE part) kv res secrets DB schemas","title":"Caching"},{"location":"developers/todo/#props-computed-getters-and-setters","text":"I would like to implement an architectural change how these concepts are handled. Schemas will be defining objects for which getters and setters are defined. Some component might allow for arbitrary definitions (already the case for the dispatcher which could be recycled), but most are fixed. Props are just calls to setters for which expression evaluation from a string is available. They are just an artifact of XML components, native ones for the most part are only going to use getters and setters directly. It is also possible to mark specific objects as persistent . Those will be recorded as secrets & recovered if so desired. It is also possible to mark specific objects as semantic . Those will be reported in the serialization.","title":"Props, computed, getters and setters"},{"location":"developers/todo/#supported-environments","text":"","title":"Supported environments"},{"location":"developers/todo/#tcc","text":"Add basic support for TCC Provide extensive bindings for TCC Stage 0 Stage 1 Full subset of libc Stage 2 Full interface for ui tree operations UI base support of module scripts UI base support of getters/setters. Add an alternative backend like Cello Add an alternative backend like Vala (?) All done for now","title":"TCC"},{"location":"developers/todo/#wasmwasi","text":"Why is WASM so frustrating to work with!?! No compiler can compile itself into a wasm/wasi binary. AssemblyScript is a mess that is barely able to generate itself with WASI, but still it requires binaryen distributed alongside. Because of a series of requirements, V8 is basically the only runtime capable of running that combo. An all LLVM versions for wasm/wasi I tried were failures (or half so). I am starting to regret java bytecode already. Notice: the wasmer registry seems to have a small collection of clang builds on it. It might be good enough to start experimenting. https://wasmer.io/taybenlor/runno-clang Integrate an engine (WAMR) Find a way to have llvm/clang running as wasm an build to wasm (no emscripten) cannot do that Find a way to integrate assemblyscript as a language and embeding the compiler ahah. not working","title":"WASM/WASI"},{"location":"developers/todo/#quickjs","text":"Add quickjs to the repo Add basic support for quickjs embedded scripts. UI base support of module scripts Support of getters and setters","title":"QuickJS"},{"location":"developers/todo/#lua","text":"Add Lua & LuaJIT to the repo Add baseline support for Lua embedded scripts.","title":"LUA"},{"location":"developers/todo/#unclassified","text":"","title":"Unclassified"},{"location":"developers/todo/#general","text":"Refactor the ui_tree to better handle different classes of components Prepare infrastructure for codegen (no impl yet) Move all the tcc stuff in proper pipelines Add more components to play with For speed of development, many operations are written recursively. The stack is pretty limited, so either there is tail recursion or stacks in heap must be used. Add caching & preloading to avoid making the process of building UI dog slow. Partial implementation to support modules Partial implementation to load resources in memory within the session (they might be promoted once SQLITE gets integrated)","title":"General"},{"location":"developers/todo/#references-for-ffi-lua","text":"https://github.com/shajunxing/quickjs-ffi https://github.com/q66/cffi-lua https://github.com/LuaJIT/LuaJIT http://lua-users.org/wiki/SimpleLuaApiExample Probably I will allow switching between Lua & LuaJIT with a compile flag.","title":"References for FFI &amp; Lua"},{"location":"developers/versioning/","text":"Versioning # At this time, this repository is only available as a meson package. Releases are tagged on the repo, with master as the main development branch. Semantic versioning will be followed after v1.0.0 . Before that, any release can and will have breaking changes. Versions ending with an odd revision number are meant for proper releases, while even numbers are only for in-dev stages.","title":"Versioning"},{"location":"developers/versioning/#versioning","text":"At this time, this repository is only available as a meson package. Releases are tagged on the repo, with master as the main development branch. Semantic versioning will be followed after v1.0.0 . Before that, any release can and will have breaking changes. Versions ending with an odd revision number are meant for proper releases, while even numbers are only for in-dev stages.","title":"Versioning"},{"location":"developers/ideas/auto-ui-actions/","text":"Warning None of what follows has been implemented yet. These are just specs to sketch out the idea. It will probably its own separate project like vs.templ as it needs a tight fltk integration. Automatic UI actions are sourced from a XML file, and run sequentially once the UI has been fully built. These actions are designed for machine usage and macros. Typical scenarios can be: - To replace human input in automatic testing pipelines. - In documentation, to show users how to do something within the application. - To allow LLM agents or crawlers to operate on a UI built with vs. Supported actions # action.sleep wait for some time before proceeding. action.click to run the callback associated to a widget. action.fill to add some value as keyboard input or copy/cut. action.tab action.focus action.wait to wait for some condition on the ui to be true. Special blocks for testing # test the test is resolved. - deny the test ends and is marked as unresolved. - accept if unresolved, continue with the next operation. - exit to end the application. Support in documentation # Documentation for vs projects is intended to be written in Markdown. As such, XML code can be directly embedded in it, which means vs components are usable (please notice that based on the local policies, this functionality might be disabled). The special component fl:inline-helper can embed UI actions in it, which will run on request. Additional props to handle semantics # Additional explicit information should be provided to ensure the semantic of the exposed UI components is explained. This is done by nesting a semantics element to each element needing that. Elements with semantics specified should also have a name attribute. For example: <fl:container> <script> void on_new(){} void on_open(){} void on_delete(){} $cb(on_new) $cb(on_open) $cb(on_delete) </script> <semantics> <callback name=\"on_new\">Explanation</callback> <callback name=\"on_open\">Explanation</callback> <callback name=\"on_delete\">Explanation</callback> </semantics> <fl:button on.callback=\"on_new\" label=\"New\"/> <fl:button on.callback=\"on_open\" label=\"New\"/> <fl:button on.callback=\"on_delete\" label=\"New\"/> </fl:container> This additional context is extremely good to automatically generate documentation, but also to ensure proper contextual information is given to autonomous agents using the UI.","title":"Auto ui actions"},{"location":"developers/ideas/auto-ui-actions/#supported-actions","text":"action.sleep wait for some time before proceeding. action.click to run the callback associated to a widget. action.fill to add some value as keyboard input or copy/cut. action.tab action.focus action.wait to wait for some condition on the ui to be true.","title":"Supported actions"},{"location":"developers/ideas/auto-ui-actions/#special-blocks-for-testing","text":"test the test is resolved. - deny the test ends and is marked as unresolved. - accept if unresolved, continue with the next operation. - exit to end the application.","title":"Special blocks for testing"},{"location":"developers/ideas/auto-ui-actions/#support-in-documentation","text":"Documentation for vs projects is intended to be written in Markdown. As such, XML code can be directly embedded in it, which means vs components are usable (please notice that based on the local policies, this functionality might be disabled). The special component fl:inline-helper can embed UI actions in it, which will run on request.","title":"Support in documentation"},{"location":"developers/ideas/auto-ui-actions/#additional-props-to-handle-semantics","text":"Additional explicit information should be provided to ensure the semantic of the exposed UI components is explained. This is done by nesting a semantics element to each element needing that. Elements with semantics specified should also have a name attribute. For example: <fl:container> <script> void on_new(){} void on_open(){} void on_delete(){} $cb(on_new) $cb(on_open) $cb(on_delete) </script> <semantics> <callback name=\"on_new\">Explanation</callback> <callback name=\"on_open\">Explanation</callback> <callback name=\"on_delete\">Explanation</callback> </semantics> <fl:button on.callback=\"on_new\" label=\"New\"/> <fl:button on.callback=\"on_open\" label=\"New\"/> <fl:button on.callback=\"on_delete\" label=\"New\"/> </fl:container> This additional context is extremely good to automatically generate documentation, but also to ensure proper contextual information is given to autonomous agents using the UI.","title":"Additional props to handle semantics"},{"location":"developers/ideas/caching/","text":"Warning Revision needed as the first fragments of caching have been implemented. file:// prefix for all files mounted on fs, both absolute and relative. http(s):// prefix for resources obtainable via internet (libcurl?). this:// relative prefix based on the local base (only supporting file, http/s, packages, app, user). packages:// prefix for where external libraries are downloaded and locally stored (CORS safety like for http/s based on the package name) app:// prefix for the root where shared libraries and includes are stored (bindings included) user:// location where permanent files are allocated (downloaded stuff, generated configuration) sock:// virtual location to the UNIX socket (?) for external code execution storage:// prefix for the persistent DB storage session:// prefix for temporary resources available during the current session. Extensions # Some tags do have a src attribute: Optional for script in case inline content is not provided. If defined and the src load fails its content is used instead. If used with file , http(s) , app , user it will try to match the full name. In case of failure if no typical extension is matched it will try to take it (considering the alternatives due to portability factors) If used with sock , storage , session or cache only store/uuids are usable, and in most cases are just for internal usage. Needed for the import block. Same rules as for script. Needed for use . Same rules as for script. All tags with src also have cache policy. Default is session . no-cache session forever Simple number Timestamp of invalidation. Number with + prefix, max time before invalidation since last aquisition. Keep in mind, even if invalidated already rendered objects will not re-render on their own. All use (or forwarded nodes from the list of imports) allows for the definition of policy-safety : unrestricted is the default and lets any code to run safe only wasm and quickjs can run, but globally defined and cached components can still safest only wasm and quickjs can run. Children cannot be less safe of the parent. If so its original will be inherited. Auth tokens are used to determine which application is running. Every app and component can set its own authtoken as a cryptohash of the provided uuid with the one of the user. Components cannot gather information about authtokens once computed, so the user secret is generally safe. Setting it to an empty string will generate a random one. Using the original user secret as auth token (not exposed, not usable, just internal) determines shared globals. They are not trivially used by components as a failsafe","title":"Caching"},{"location":"developers/ideas/caching/#extensions","text":"Some tags do have a src attribute: Optional for script in case inline content is not provided. If defined and the src load fails its content is used instead. If used with file , http(s) , app , user it will try to match the full name. In case of failure if no typical extension is matched it will try to take it (considering the alternatives due to portability factors) If used with sock , storage , session or cache only store/uuids are usable, and in most cases are just for internal usage. Needed for the import block. Same rules as for script. Needed for use . Same rules as for script. All tags with src also have cache policy. Default is session . no-cache session forever Simple number Timestamp of invalidation. Number with + prefix, max time before invalidation since last aquisition. Keep in mind, even if invalidated already rendered objects will not re-render on their own. All use (or forwarded nodes from the list of imports) allows for the definition of policy-safety : unrestricted is the default and lets any code to run safe only wasm and quickjs can run, but globally defined and cached components can still safest only wasm and quickjs can run. Children cannot be less safe of the parent. If so its original will be inherited. Auth tokens are used to determine which application is running. Every app and component can set its own authtoken as a cryptohash of the provided uuid with the one of the user. Components cannot gather information about authtokens once computed, so the user secret is generally safe. Setting it to an empty string will generate a random one. Using the original user secret as auth token (not exposed, not usable, just internal) determines shared globals. They are not trivially used by components as a failsafe","title":"Extensions"},{"location":"developers/ideas/expected-new-getters/","text":"<component> <script lang=\"c\"> int set_name(const void*){} int get_name(void*){} $field { \"name\", set_name, get_name, } </script> </component>","title":"Expected new getters"},{"location":"developers/ideas/revised-namespaces/","text":"Starting with # they cannot be reached via public APIs. If node , container , slot or container-slot they are just private namespaces with the relative restrictions. Being private, there is no way to reference those by name via public APIs. Any child of an element tagged as leaf will be placed in the nearest parent namespace available based on the XML tree structure. There is always one.","title":"Revised namespaces"},{"location":"developers/ideas/sandboxing/","text":"App-Class Keys # App-Class keys are the main mechanism to ensure data sandboxing across applications, even when part of the same rendered UI. App-class keys are meant to be unique across a class of apps which can be considered as strongly related . For example the equivalent of web pages from the same domain would likely share the same app-class key under vs. App keys are not used as they appear in source, but are computed based on the parent one. For top level app-class keys, the parent key used for mixing is the secret one for each user. It is possible to record metadata for app-class keys, like the owner and which domains are allowed to use it. It might be a good idea to provide some form of registry shipped with vs and updated of known entries. Viewports # Viewports are a way to break the chain of keys, ensuring that an embedded app can be directly attached to the user root key, no matter how nested it is located. This poses some safety concerns, so there are strong restrictions in how viewports are handled: No information can be exchanged between its content and the parent for example. Some application might refuse to run within a viewport, unless all its parent up to root are restricted to some specific safety policies. Visibility specifiers # Visibility specifiers are the third and last way to sandbox content, and it is by limiting access to nodes in the UI tree. leaf terminal node. No named children below (and even if there are, we cannot see it; in that case slot should be used). node pass-through both up and down. container children cannot go up beyond the container. slot parents cannot get any lower, beyond the slot. slot-container children cannot go up, parents cannot go down. Notice! There is some unintuitive behaviour based on these rules: given node:A -> slot:B -> leaf:C as starting from A , B can be resolved, C cannot. However, B/C is resolved as one can reach B from A and C from B . To avoid propagation, boundary elements should be kept nameless so that they cannot be later recalled in a path expression and are purged from all serializations.","title":"Sandboxing"},{"location":"developers/ideas/sandboxing/#app-class-keys","text":"App-Class keys are the main mechanism to ensure data sandboxing across applications, even when part of the same rendered UI. App-class keys are meant to be unique across a class of apps which can be considered as strongly related . For example the equivalent of web pages from the same domain would likely share the same app-class key under vs. App keys are not used as they appear in source, but are computed based on the parent one. For top level app-class keys, the parent key used for mixing is the secret one for each user. It is possible to record metadata for app-class keys, like the owner and which domains are allowed to use it. It might be a good idea to provide some form of registry shipped with vs and updated of known entries.","title":"App-Class Keys"},{"location":"developers/ideas/sandboxing/#viewports","text":"Viewports are a way to break the chain of keys, ensuring that an embedded app can be directly attached to the user root key, no matter how nested it is located. This poses some safety concerns, so there are strong restrictions in how viewports are handled: No information can be exchanged between its content and the parent for example. Some application might refuse to run within a viewport, unless all its parent up to root are restricted to some specific safety policies.","title":"Viewports"},{"location":"developers/ideas/sandboxing/#visibility-specifiers","text":"Visibility specifiers are the third and last way to sandbox content, and it is by limiting access to nodes in the UI tree. leaf terminal node. No named children below (and even if there are, we cannot see it; in that case slot should be used). node pass-through both up and down. container children cannot go up beyond the container. slot parents cannot get any lower, beyond the slot. slot-container children cannot go up, parents cannot go down. Notice! There is some unintuitive behaviour based on these rules: given node:A -> slot:B -> leaf:C as starting from A , B can be resolved, C cannot. However, B/C is resolved as one can reach B from A and C from B . To avoid propagation, boundary elements should be kept nameless so that they cannot be later recalled in a path expression and are purged from all serializations.","title":"Visibility specifiers"},{"location":"developers/ideas/signals/","text":"Originally, a separate mechanism to handle custom events or signals was envisioned. However, the current infrastructure should be enough to support them. Each frame should have a special symbol $handler or something like that which can: - Raise the event top (if not a slot and coming from down). - Propagate down to all children except the direction it is coming from (if not a container and coming from up) Events self-raised can be propagated top and down regardless of the self type. If not implemented the handler will follow any direction encoded within the signal packet to determine where it should go. Else, the custom implementation will take over, but the basic propagation functions are exposed for use. Signal packet # Origin (ptr). Dest (ptr). From, the node this event was propagated from. It changes as the packet is propagated. Payload (buffer) Bubble up flag. Suggestion to propagate the event up. Propagate down flag. Suggestion to propagate the event down. Once flag. Suggestion to stop evaluation when the first match is found. Function to determine if a node should or should not be selected for propagation (a pre-filter) Maximum propagation level (to avoid looping them forever in strange cases)","title":"Signals"},{"location":"developers/ideas/signals/#signal-packet","text":"Origin (ptr). Dest (ptr). From, the node this event was propagated from. It changes as the packet is propagated. Payload (buffer) Bubble up flag. Suggestion to propagate the event up. Propagate down flag. Suggestion to propagate the event down. Once flag. Suggestion to stop evaluation when the first match is found. Function to determine if a node should or should not be selected for propagation (a pre-filter) Maximum propagation level (to avoid looping them forever in strange cases)","title":"Signal packet"},{"location":"developers/old-technical/specs/","text":"app & component # Both app and component are supporting virtually the same underlying structure, and they only differ as one can be root for an application, the other does not. Attributes # app.token unique id for this app, used to separate pages in cache. It is a 512bit key expressed in hex notation. If set to \"\" a random one will be assigned. Unlike component , app must define it as it cannot inherit and expose the secret user token directly. Special children # metadata contains sub-field for information about the author, licence etc. It is made available as map to the entire application script.global contains sub-tags decl and impl . Each will have the same fields as normal script . Only one for each is allowed, and only one script.global can be defined per app / component import with attribute src.* and as policies TBD Normal children & attributes # Both app & component can contain any tag or attribute as the other container-like tags. container-like components #","title":"Specs"},{"location":"developers/old-technical/specs/#app-component","text":"Both app and component are supporting virtually the same underlying structure, and they only differ as one can be root for an application, the other does not.","title":"app &amp; component"},{"location":"developers/old-technical/specs/#attributes","text":"app.token unique id for this app, used to separate pages in cache. It is a 512bit key expressed in hex notation. If set to \"\" a random one will be assigned. Unlike component , app must define it as it cannot inherit and expose the secret user token directly.","title":"Attributes"},{"location":"developers/old-technical/specs/#special-children","text":"metadata contains sub-field for information about the author, licence etc. It is made available as map to the entire application script.global contains sub-tags decl and impl . Each will have the same fields as normal script . Only one for each is allowed, and only one script.global can be defined per app / component import with attribute src.* and as policies TBD","title":"Special children"},{"location":"developers/old-technical/specs/#normal-children-attributes","text":"Both app & component can contain any tag or attribute as the other container-like tags.","title":"Normal children &amp; attributes"},{"location":"developers/old-technical/specs/#container-like-components","text":"","title":"container-like components"},{"location":"developers/old-technical/two-pass/","text":"Main rendering loop (to revised) # The UI must all be run in a single thread, which can slow down things. For this reason rendering is split in two passes. First pass: # During the first pass all tags needing complex or long computation (loading files from the internet or compiling stuff) will preload data based on the respective caching policies. Each src or resource to handle can have its own thread, and results are collected on protected data structures. The original xml is updated with special src-cached attributes, so that they are used as references in place of the original source. Excluded are elements where a special tag is used to mark them not to be prefetched. And also not module scripts and data which are handled later. Rendering # UI is rendered. Resources which were marked not to be fetched earlier are handled stopping the main thread. not module scripts and data once met are added to a pool, and handled asynchronously. Final join # After waiting for the second pool of threads to complete, all the missing things are added, events enabled, and the process is finished. Component rendering steps # Allocate the new component Resolve mixin, data or script inside first, before any other children. They are not real DOM children. Apply all props (mixin+inline) Run on children (except for terminal widgets)","title":"Main rendering loop (to revised)"},{"location":"developers/old-technical/two-pass/#main-rendering-loop-to-revised","text":"The UI must all be run in a single thread, which can slow down things. For this reason rendering is split in two passes.","title":"Main rendering loop (to revised)"},{"location":"developers/old-technical/two-pass/#first-pass","text":"During the first pass all tags needing complex or long computation (loading files from the internet or compiling stuff) will preload data based on the respective caching policies. Each src or resource to handle can have its own thread, and results are collected on protected data structures. The original xml is updated with special src-cached attributes, so that they are used as references in place of the original source. Excluded are elements where a special tag is used to mark them not to be prefetched. And also not module scripts and data which are handled later.","title":"First pass:"},{"location":"developers/old-technical/two-pass/#rendering","text":"UI is rendered. Resources which were marked not to be fetched earlier are handled stopping the main thread. not module scripts and data once met are added to a pool, and handled asynchronously.","title":"Rendering"},{"location":"developers/old-technical/two-pass/#final-join","text":"After waiting for the second pool of threads to complete, all the missing things are added, events enabled, and the process is finished.","title":"Final join"},{"location":"developers/old-technical/two-pass/#component-rendering-steps","text":"Allocate the new component Resolve mixin, data or script inside first, before any other children. They are not real DOM children. Apply all props (mixin+inline) Run on children (except for terminal widgets)","title":"Component rendering steps"},{"location":"developers/old-technical/xml-format/","text":"Roots # The top level object is marked as app and is effectively the application root. The loader in running mode will require an xml with such an entry point (the root cannot be a native object). The tag component is used as the top level for any reusable component. Tag conventions # UI components are not scoped in a namespace, however by convention they are all written in lower letters. Custom user components should have the first letter as capital, or use some namespace like hello:world . Attribute conventions # Attributes can often be composed, like multiple parts making up the full attribute, at least logically. For example box can be split in box.x , box.y , box.w and box.h . If intersective, the more nested variant takes priority. So box=\"0,0,0,0\" box.x=\"10\" will be equivalent to box=\"10,0,0,0\" regardless of order. Reserved names # app component use import script script.global data res for externally loaded resources, later usable via its name symbol namespace to scope names within a component, limit upper and lower visibility, filter events and determine Within each, some additional tags might be reserved. All the other names are free, except for widgets based on your distribution. As for attributes there are only a handful which are always reserved: name groups on.* : can only be used to define callbacks. Custom events are possible, but they have a specific semantics & side effects. auth and all its sub-arguments src and all its sub-arguments body and all its sub-arguments There are few that, while not restricted, should only be used if following the same semantics: box label visible enabled","title":"Xml format"},{"location":"developers/old-technical/xml-format/#roots","text":"The top level object is marked as app and is effectively the application root. The loader in running mode will require an xml with such an entry point (the root cannot be a native object). The tag component is used as the top level for any reusable component.","title":"Roots"},{"location":"developers/old-technical/xml-format/#tag-conventions","text":"UI components are not scoped in a namespace, however by convention they are all written in lower letters. Custom user components should have the first letter as capital, or use some namespace like hello:world .","title":"Tag conventions"},{"location":"developers/old-technical/xml-format/#attribute-conventions","text":"Attributes can often be composed, like multiple parts making up the full attribute, at least logically. For example box can be split in box.x , box.y , box.w and box.h . If intersective, the more nested variant takes priority. So box=\"0,0,0,0\" box.x=\"10\" will be equivalent to box=\"10,0,0,0\" regardless of order.","title":"Attribute conventions"},{"location":"developers/old-technical/xml-format/#reserved-names","text":"app component use import script script.global data res for externally loaded resources, later usable via its name symbol namespace to scope names within a component, limit upper and lower visibility, filter events and determine Within each, some additional tags might be reserved. All the other names are free, except for widgets based on your distribution. As for attributes there are only a handful which are always reserved: name groups on.* : can only be used to define callbacks. Custom events are possible, but they have a specific semantics & side effects. auth and all its sub-arguments src and all its sub-arguments body and all its sub-arguments There are few that, while not restricted, should only be used if following the same semantics: box label visible enabled","title":"Reserved names"},{"location":"full-specs/","text":"Important This project is very much in its infancy. These specs will provide information about features which are yet to be implemented. Broadly speaking, they target at least v0.5.x from the milestone page Quick overview # vs is a lightweight runtime to design and run custom user interfaces based on fltk . It aims to be fast, to fit on systems with limited resources available, and to run on virtually any platform. The vs runtime ships with several built-in features, tools and libraries: A self-hosted workspace/explorer to quickly access local and remote apps, to update vs , and to visually customize user settings. A self-hosted UI builder/IDE to visually inspect, debug or write custom components and applications. C bindings to expose most features and allow custom native components from third parties. A language server & extension to directly handle .vs and .tvs files in vscode and compatible editors. Structure of an application # An entry-point file referred as app , whose root element is app . Components , whose root element is component , either used from the entry-point file or other components. Data sources , usually files with a specific format or endpoints with a well-defined interface. Assets like images. An optional external application usually as a dynamic library linked with the app , or indirectly used via a Unix socket domain. Furthermore, there are additional elements which are not controlled by those writing the app, but on the user side: A storage where secrets and persistent data can be saved. A profile with clear permissions and safety policies. An application can provide one as asset suggesting the user to adopt it, but it has no control over what the user decides. Both apps and components can be either specified as final vs xml files, or they can be the result of some static data and a template compiled down into \u201cfinal\u201d xml files. Basic VS elements # basic attributes for frame-able components # Except for some special entity or those which cannot have a vs frame, there are some attributes shared by everyone attribute type default description name string? mixins frame.mode frame.access frame.type basic attributes for fl:xxx # TODO: Add link to automatically generated docs app # attributes # attribute type default description key blob(256)? null If set, this is the class key used by the component. It requires fat components tag string? null If set, this is the page-tag information to distinguish different pages within the same class keys link-with path? null If set, the dynamic library to expose to each embedded script component # attributes # attribute type default description thin boolean true If true, this component will not allow storing app class keys, policies and path information auto-prune boolean false If true, remove this component from the tree, directly expanding its children. Incompatible with thin: false key blob(256)? null If set, this is the class key used by the component. It requires fat components tag string? null If set, this is the page-tag information to distinguish different pages within the same class keys namespace # metadata # metadata are is a pseudo-element which must be placed as direct children of an app or component entity. Entries inside it will be parsed for documentation, attribution or to provide versioning information. import # import are directives which must be placed as direct children of an app or component entity. use # data # attributes # src filter sort order debug # attributes # key value viewport # attributes # src elements with a frame # attributes # name mixins frame.mode frame.acces frame.type script # script s are pseudo-entities which must be placed as direct children of a frame-able entity. Only one for each frame-able entity can be defined. attributes # attribute type default description lang string? null If unset, the language will be automatically inferred from contextual information src path? null If set, its content will only be used as fall-back and the src content will be preferred. type single , module single Used to specify if it should be handled as a single user script or a shared one (TODO:link) compact boolean false If set, all code is assumed to be inside the body of the default callback. mixin # mixin s are pseudo-entities which must be placed as direct children of a frame-able entity. Only one for each frame-able entity can be defined. attributes # semantics # Using components # There are two ways to use other components inside others or within your app: Via vs:use , suggested for cases where it is only needed once. Adding a vs:import directive in the app/component, and using it as an element under the specified name. There is also vs:viewport which does something similar, but in this case a new root is rendered within your document, with no event or symbol being passed top/down or bottom/up. Examples # <vs:component tag.suggested=\"component-a\"> <vs:import src=\"this://component-b.vs\" tag=\"component-b\"/> <component-b prop-1=\"value-1\"/> </vs:component> <vs:component tag.suggested=\"component-a\"> <vs:use vs:src=\"this://component-b.vs\" prop-1=\"value-1\"/> </vs:component> Names # Names are unique identifiers within a namespace for components. Adding a name to a component instance also implies that a vs frame is created for it. The converse is also true, and if no explicit name is assigned, one will be automatically generated. Related to names there are two undefined behaviours: Giving the same name to two or more elements within the same namespace. Accessing elements for which the name has not been manually defined. Restrictions on names # At this time, no restriction on names has been defined nor implemented. Scope of visibility # The scope within names are visible is called namespace . A namespace is not strictly speaking equivalent to the UI tree structure, and all elements within a namespace, regardless of their child/parent ordering, are mutually visible. Transparent nodes # Some elements will have their associated frame and name, but their mode is set to transparent . In this case any child will be part of the same namespace as their parent, ignoring their tree dependency. Limitations on visibility # Elements for which their mode is set to container or slot-container will prevent name resolution upwards from children. Elements for which their mode is set to slot or slot-container will prevent name resolution downwards to its children from nodes above it. A node, will always be able to access up and down, regardless of the mode set. Limitations are only for others going through it. Props # Computed values # Symbols # Callbacks # Unknowns # Fields (Setter/Getters) # Dispatcher # Draw # Event propagation # Scripts # Embedded scripts are Single user scripts # Module scripts # Mixins # <app> <mixin name=\"...\" args.../> <mixins src=\"\"/> <item mixin=\"class1,class2,class3\" overrides.../> </app> Mixins can be for: * Everyone ns:* Everyone in xml namespace ns +tag1,+tag2,... a list of tags class1,class2 elements with that token in the mixin attribute Topics # Templating Data Scripting Virtual paths Settings & user profiles","title":"Index"},{"location":"full-specs/#quick-overview","text":"vs is a lightweight runtime to design and run custom user interfaces based on fltk . It aims to be fast, to fit on systems with limited resources available, and to run on virtually any platform. The vs runtime ships with several built-in features, tools and libraries: A self-hosted workspace/explorer to quickly access local and remote apps, to update vs , and to visually customize user settings. A self-hosted UI builder/IDE to visually inspect, debug or write custom components and applications. C bindings to expose most features and allow custom native components from third parties. A language server & extension to directly handle .vs and .tvs files in vscode and compatible editors.","title":"Quick overview"},{"location":"full-specs/#structure-of-an-application","text":"An entry-point file referred as app , whose root element is app . Components , whose root element is component , either used from the entry-point file or other components. Data sources , usually files with a specific format or endpoints with a well-defined interface. Assets like images. An optional external application usually as a dynamic library linked with the app , or indirectly used via a Unix socket domain. Furthermore, there are additional elements which are not controlled by those writing the app, but on the user side: A storage where secrets and persistent data can be saved. A profile with clear permissions and safety policies. An application can provide one as asset suggesting the user to adopt it, but it has no control over what the user decides. Both apps and components can be either specified as final vs xml files, or they can be the result of some static data and a template compiled down into \u201cfinal\u201d xml files.","title":"Structure of an application"},{"location":"full-specs/#basic-vs-elements","text":"","title":"Basic VS elements"},{"location":"full-specs/#basic-attributes-for-frame-able-components","text":"Except for some special entity or those which cannot have a vs frame, there are some attributes shared by everyone attribute type default description name string? mixins frame.mode frame.access frame.type","title":"basic attributes for frame-able components"},{"location":"full-specs/#basic-attributes-for-flxxx","text":"TODO: Add link to automatically generated docs","title":"basic attributes for fl:xxx"},{"location":"full-specs/#app","text":"","title":"app"},{"location":"full-specs/#attributes","text":"attribute type default description key blob(256)? null If set, this is the class key used by the component. It requires fat components tag string? null If set, this is the page-tag information to distinguish different pages within the same class keys link-with path? null If set, the dynamic library to expose to each embedded script","title":"attributes"},{"location":"full-specs/#component","text":"","title":"component"},{"location":"full-specs/#attributes_1","text":"attribute type default description thin boolean true If true, this component will not allow storing app class keys, policies and path information auto-prune boolean false If true, remove this component from the tree, directly expanding its children. Incompatible with thin: false key blob(256)? null If set, this is the class key used by the component. It requires fat components tag string? null If set, this is the page-tag information to distinguish different pages within the same class keys","title":"attributes"},{"location":"full-specs/#namespace","text":"","title":"namespace"},{"location":"full-specs/#metadata","text":"metadata are is a pseudo-element which must be placed as direct children of an app or component entity. Entries inside it will be parsed for documentation, attribution or to provide versioning information.","title":"metadata"},{"location":"full-specs/#import","text":"import are directives which must be placed as direct children of an app or component entity.","title":"import"},{"location":"full-specs/#use","text":"","title":"use"},{"location":"full-specs/#data","text":"","title":"data"},{"location":"full-specs/#attributes_2","text":"src filter sort order","title":"attributes"},{"location":"full-specs/#debug","text":"","title":"debug"},{"location":"full-specs/#attributes_3","text":"key value","title":"attributes"},{"location":"full-specs/#viewport","text":"","title":"viewport"},{"location":"full-specs/#attributes_4","text":"src","title":"attributes"},{"location":"full-specs/#elements-with-a-frame","text":"","title":"elements with a frame"},{"location":"full-specs/#attributes_5","text":"name mixins frame.mode frame.acces frame.type","title":"attributes"},{"location":"full-specs/#script","text":"script s are pseudo-entities which must be placed as direct children of a frame-able entity. Only one for each frame-able entity can be defined.","title":"script"},{"location":"full-specs/#attributes_6","text":"attribute type default description lang string? null If unset, the language will be automatically inferred from contextual information src path? null If set, its content will only be used as fall-back and the src content will be preferred. type single , module single Used to specify if it should be handled as a single user script or a shared one (TODO:link) compact boolean false If set, all code is assumed to be inside the body of the default callback.","title":"attributes"},{"location":"full-specs/#mixin","text":"mixin s are pseudo-entities which must be placed as direct children of a frame-able entity. Only one for each frame-able entity can be defined.","title":"mixin"},{"location":"full-specs/#attributes_7","text":"","title":"attributes"},{"location":"full-specs/#semantics","text":"","title":"semantics"},{"location":"full-specs/#using-components","text":"There are two ways to use other components inside others or within your app: Via vs:use , suggested for cases where it is only needed once. Adding a vs:import directive in the app/component, and using it as an element under the specified name. There is also vs:viewport which does something similar, but in this case a new root is rendered within your document, with no event or symbol being passed top/down or bottom/up.","title":"Using components"},{"location":"full-specs/#examples","text":"<vs:component tag.suggested=\"component-a\"> <vs:import src=\"this://component-b.vs\" tag=\"component-b\"/> <component-b prop-1=\"value-1\"/> </vs:component> <vs:component tag.suggested=\"component-a\"> <vs:use vs:src=\"this://component-b.vs\" prop-1=\"value-1\"/> </vs:component>","title":"Examples"},{"location":"full-specs/#names","text":"Names are unique identifiers within a namespace for components. Adding a name to a component instance also implies that a vs frame is created for it. The converse is also true, and if no explicit name is assigned, one will be automatically generated. Related to names there are two undefined behaviours: Giving the same name to two or more elements within the same namespace. Accessing elements for which the name has not been manually defined.","title":"Names"},{"location":"full-specs/#restrictions-on-names","text":"At this time, no restriction on names has been defined nor implemented.","title":"Restrictions on names"},{"location":"full-specs/#scope-of-visibility","text":"The scope within names are visible is called namespace . A namespace is not strictly speaking equivalent to the UI tree structure, and all elements within a namespace, regardless of their child/parent ordering, are mutually visible.","title":"Scope of visibility"},{"location":"full-specs/#transparent-nodes","text":"Some elements will have their associated frame and name, but their mode is set to transparent . In this case any child will be part of the same namespace as their parent, ignoring their tree dependency.","title":"Transparent nodes"},{"location":"full-specs/#limitations-on-visibility","text":"Elements for which their mode is set to container or slot-container will prevent name resolution upwards from children. Elements for which their mode is set to slot or slot-container will prevent name resolution downwards to its children from nodes above it. A node, will always be able to access up and down, regardless of the mode set. Limitations are only for others going through it.","title":"Limitations on visibility"},{"location":"full-specs/#props","text":"","title":"Props"},{"location":"full-specs/#computed-values","text":"","title":"Computed values"},{"location":"full-specs/#symbols","text":"","title":"Symbols"},{"location":"full-specs/#callbacks","text":"","title":"Callbacks"},{"location":"full-specs/#unknowns","text":"","title":"Unknowns"},{"location":"full-specs/#fields-settergetters","text":"","title":"Fields (Setter/Getters)"},{"location":"full-specs/#dispatcher","text":"","title":"Dispatcher"},{"location":"full-specs/#draw","text":"","title":"Draw"},{"location":"full-specs/#event-propagation","text":"","title":"Event propagation"},{"location":"full-specs/#scripts","text":"Embedded scripts are","title":"Scripts"},{"location":"full-specs/#single-user-scripts","text":"","title":"Single user scripts"},{"location":"full-specs/#module-scripts","text":"","title":"Module scripts"},{"location":"full-specs/#mixins","text":"<app> <mixin name=\"...\" args.../> <mixins src=\"\"/> <item mixin=\"class1,class2,class3\" overrides.../> </app> Mixins can be for: * Everyone ns:* Everyone in xml namespace ns +tag1,+tag2,... a list of tags class1,class2 elements with that token in the mixin attribute","title":"Mixins"},{"location":"full-specs/#topics","text":"Templating Data Scripting Virtual paths Settings & user profiles","title":"Topics"},{"location":"full-specs/data/","text":"Data # Data elements are the main and most idiomatic mechanism in vs to include state in applications. General structure # Attributes # readonly as boolean. Defaults to false . If true, no mutation is allowed from within this application. volatile as boolean. Defaults to true . If true it must be expected that events outside the scope of this app can change data. src as string. The source path of data. It must be specified. schema as string. The source path to a schema file. Used as metadata for static checks when the associated datasource is used. Subtypes # CSV # Additional attributes # header as boolean. Defaults to false . If true the first row is used as schema information or skipped if schema is already provided. separator.field as string. Defaults to \\t . The character to split columns. separator.record as string. Defaults to \\n . The character to split records. FS # JSON # SQLITE # XML #","title":"Data"},{"location":"full-specs/data/#data","text":"Data elements are the main and most idiomatic mechanism in vs to include state in applications.","title":"Data"},{"location":"full-specs/data/#general-structure","text":"","title":"General structure"},{"location":"full-specs/data/#attributes","text":"readonly as boolean. Defaults to false . If true, no mutation is allowed from within this application. volatile as boolean. Defaults to true . If true it must be expected that events outside the scope of this app can change data. src as string. The source path of data. It must be specified. schema as string. The source path to a schema file. Used as metadata for static checks when the associated datasource is used.","title":"Attributes"},{"location":"full-specs/data/#subtypes","text":"","title":"Subtypes"},{"location":"full-specs/data/#csv","text":"","title":"CSV"},{"location":"full-specs/data/#additional-attributes","text":"header as boolean. Defaults to false . If true the first row is used as schema information or skipped if schema is already provided. separator.field as string. Defaults to \\t . The character to split columns. separator.record as string. Defaults to \\n . The character to split records.","title":"Additional attributes"},{"location":"full-specs/data/#fs","text":"","title":"FS"},{"location":"full-specs/data/#json","text":"","title":"JSON"},{"location":"full-specs/data/#sqlite","text":"","title":"SQLITE"},{"location":"full-specs/data/#xml","text":"","title":"XML"},{"location":"full-specs/paths/","text":"Paths # Automatic path findings # Order of search for component when the direct fullname is not found. name is fullname reduced of its last extension. First attempt is to look for the exact name: fullname If it fails, check for any the following in such order: name.vs name.xml name.wasm name.riscv name.[arch].so | name.[arch].dll | name.[arch].dylib name.c name.md If it fails and the folder name exists, check for these: name/main.vs name/main.xml name/main.wasm name.riscv name/main.[arch].so | name/main.[arch].dll | name/main.[arch].dylib name/main.c name/main.md Implicit loading pipelines # .vs & .xml files are either loaded directly, or after being compiled from vs.templ . .wasm files are handled as wasm components by wamr .riscv are handled via the riscv vm [arch].so & al. are loaded as native components .c are compiled by tcc into native components and loaded as such .md is loaded directly as a component","title":"Paths"},{"location":"full-specs/paths/#paths","text":"","title":"Paths"},{"location":"full-specs/paths/#automatic-path-findings","text":"Order of search for component when the direct fullname is not found. name is fullname reduced of its last extension. First attempt is to look for the exact name: fullname If it fails, check for any the following in such order: name.vs name.xml name.wasm name.riscv name.[arch].so | name.[arch].dll | name.[arch].dylib name.c name.md If it fails and the folder name exists, check for these: name/main.vs name/main.xml name/main.wasm name.riscv name/main.[arch].so | name/main.[arch].dll | name/main.[arch].dylib name/main.c name/main.md","title":"Automatic path findings"},{"location":"full-specs/paths/#implicit-loading-pipelines","text":".vs & .xml files are either loaded directly, or after being compiled from vs.templ . .wasm files are handled as wasm components by wamr .riscv are handled via the riscv vm [arch].so & al. are loaded as native components .c are compiled by tcc into native components and loaded as such .md is loaded directly as a component","title":"Implicit loading pipelines"},{"location":"full-specs/scripting/","text":"Embedded scripts are small programs which can be integrated directly in the XML structure of a vs component or application. Several languages and related backends are available: C running on TinyCC JS running on QuickJS Lua running on Lua/LuaJIT Any language with a backend which can run on libriscv WASM support was originally planned, but the lack of good tooling put it in the freezer for now. When working with embedded scripts there are few things to consider: Different runtimes can be more or less safe. Please refer to the safety policies for more context on this. The runtime exposed by this language might not be what you would expect. For example, C has no libc, only a subset of it at best, and functions which are specific to vs . While there is an attempt to provide feature parity between the different backends, this is not always possible. Differences (for now) are tracked here There is no restriction on what you can do within embedded scripts, but it is clear there should be no complex computation. Filesystem and network access might be available with some heavy restrictions and depending on policies. Most applications should not assume they can. The script tag # Modules vs Single User Scripts # Compact scripts # Exported symbols # Imported symbols #","title":"Scripting"},{"location":"full-specs/scripting/#the-script-tag","text":"","title":"The script tag"},{"location":"full-specs/scripting/#modules-vs-single-user-scripts","text":"","title":"Modules vs Single User Scripts"},{"location":"full-specs/scripting/#compact-scripts","text":"","title":"Compact scripts"},{"location":"full-specs/scripting/#exported-symbols","text":"","title":"Exported symbols"},{"location":"full-specs/scripting/#imported-symbols","text":"","title":"Imported symbols"},{"location":"full-specs/settings/","text":"Order of evaluation for policies # Directives on policies are applied base on the following priority (highest to lowest) built-in compiled profile (vs can be built with embedded policies) command line environment variables runtime/base-policy domain if not a recognized app. Else app and its domain policies are ignored. Any locally defined policy within the app or components. Structure of a settings profile # This is the tree structure of any settings XML file: vs-profile locale user : dictionary of user data, mostly used for forms auto fill-in. languages : dictionary of supported languages. They are ordered by preference (lower number higher preference) and when ambiguous by order in the XML file. theme : base user theme. It supports some attributes: src the location of a theme xml file to be used as parent. scheme pick up a color scheme if internally defined (default allowed). mode determines if using dark, light, high contrast etc. or if this choice should be left to the OS if inherit (default). initial-scene : path for the scene to show up when starting vs runtime logging parsing base-policy same structure as one entry in the policies, but this is applied as a global override to fully shut of features of vs . policies template reusable entries, used to avoid copy and paste. Their content is expanded in domain and app extending from them. name unique name in the config file extends comma separated list of sources to copy from. domain extends comma separated list of sources to copy from. app extends comma separated list of sources to copy from. User dictionary # Entries in the user dictionary are arbitrary and publicly exposed as user:// virtual paths. Apps cannot mutate them, this is only possible via settings. They are not a replacement for secrets! User data should only include things like user\u2019s nickname, public email, daytime zone, etc. Language codes # Language codes are expressed as a pair language , country . Country is optional, which means any satisfying the language itself can be picked. Policy structure # Flag entries # Most entries are flags supporting one of three values: yes : use the upstream value from the parent, but if that is no report a warning/error. no : revoke this permission. inherit (default): use the upstream value from the parent.","title":"Settings"},{"location":"full-specs/settings/#order-of-evaluation-for-policies","text":"Directives on policies are applied base on the following priority (highest to lowest) built-in compiled profile (vs can be built with embedded policies) command line environment variables runtime/base-policy domain if not a recognized app. Else app and its domain policies are ignored. Any locally defined policy within the app or components.","title":"Order of evaluation for policies"},{"location":"full-specs/settings/#structure-of-a-settings-profile","text":"This is the tree structure of any settings XML file: vs-profile locale user : dictionary of user data, mostly used for forms auto fill-in. languages : dictionary of supported languages. They are ordered by preference (lower number higher preference) and when ambiguous by order in the XML file. theme : base user theme. It supports some attributes: src the location of a theme xml file to be used as parent. scheme pick up a color scheme if internally defined (default allowed). mode determines if using dark, light, high contrast etc. or if this choice should be left to the OS if inherit (default). initial-scene : path for the scene to show up when starting vs runtime logging parsing base-policy same structure as one entry in the policies, but this is applied as a global override to fully shut of features of vs . policies template reusable entries, used to avoid copy and paste. Their content is expanded in domain and app extending from them. name unique name in the config file extends comma separated list of sources to copy from. domain extends comma separated list of sources to copy from. app extends comma separated list of sources to copy from.","title":"Structure of a settings profile"},{"location":"full-specs/settings/#user-dictionary","text":"Entries in the user dictionary are arbitrary and publicly exposed as user:// virtual paths. Apps cannot mutate them, this is only possible via settings. They are not a replacement for secrets! User data should only include things like user\u2019s nickname, public email, daytime zone, etc.","title":"User dictionary"},{"location":"full-specs/settings/#language-codes","text":"Language codes are expressed as a pair language , country . Country is optional, which means any satisfying the language itself can be picked.","title":"Language codes"},{"location":"full-specs/settings/#policy-structure","text":"","title":"Policy structure"},{"location":"full-specs/settings/#flag-entries","text":"Most entries are flags supporting one of three values: yes : use the upstream value from the parent, but if that is no report a warning/error. no : revoke this permission. inherit (default): use the upstream value from the parent.","title":"Flag entries"},{"location":"full-specs/templating/","text":"Templating # Templating is based on a vs.templ , a custom XML preprocessor loosely inspired by xslt . Its documentation can be found on its separate repository here . Within the context of vs.fltk , using templates involves two files: the static dataset which contains any structured needed by the final generation. For vs, its root must be <vs:static-data> and provide a template attribute pointing to the actual component template. The suggested extension is .vs , the same as normal components. the template itself, containing a vs tree structure and templating commands as well. Its conventional extension is .tvs . These files should never be used as components on their own. When importing or using a component which requires processing, it is compiled and replaces the original dataset before the building process in the UI continues. You can find an example for a dataset & its associated template .","title":"Templating"},{"location":"full-specs/templating/#templating","text":"Templating is based on a vs.templ , a custom XML preprocessor loosely inspired by xslt . Its documentation can be found on its separate repository here . Within the context of vs.fltk , using templates involves two files: the static dataset which contains any structured needed by the final generation. For vs, its root must be <vs:static-data> and provide a template attribute pointing to the actual component template. The suggested extension is .vs , the same as normal components. the template itself, containing a vs tree structure and templating commands as well. Its conventional extension is .tvs . These files should never be used as components on their own. When importing or using a component which requires processing, it is compiled and replaces the original dataset before the building process in the UI continues. You can find an example for a dataset & its associated template .","title":"Templating"},{"location":"releases/v0.1.1-alpha/","text":"v0.1.1-alpha # This first alpha release is not meant to be usable in real-world scenarios, and documentation will not be there yet for the most part. The main objective is to implement & test most of the pipelines needed to: build vs install it the generation of its flatpak image Still, vs is somewhat usable as a technical preview. For now, the building pipeline is not well documented, and it can be hard to replicate. Also, installing it on most distributions might cause issues with your past or future dependencies. You should be able to try it out via flatpak and the docker image provided by @andy5995. I am seeking feedback, so you are very welcome to test it along! For reference, you can check what is the intended scope of this project in terms of future developments and expected features. The milestone page also contains some related information. What\u2019s new? # This is what has been implemented so far (and some missing feature for context): Basic CLI features for the command vs . These are not expected to change for quite a while. Code generation infrastructure for fltk components and derived schemas. Infrastructure to handle the user sqlite database with proper schemas and migration. A small set of components from fltk being exposed, like buttons, labels, windows etc. Several features of vs exposed as XML elements: mixin embedded script embedded policies namespace import use caching directives dynamic data Basic XML builder (no full caching, no multithreading) Templating engine for vs components. Integration is complete, but there is ongoing work tracked in a separate repo Embedded scripts: Support for c via tcc Modules Callbacks Props Computed Dispatcher Setters/getters FFI to external libraries Debug interface Support for js via quickjs Modules Callbacks Props Computed Dispatcher Setters/getters FFI to external libraries Debug interface Very early and limited c bindings for vs.fltk , mostly for testing purposes. A simple in-memory caching for files, compiled scripts & parsed XML trees. The more complex sqlite cache is yet to be implemented in code. An early (partial) implementation of policies and coarse-grained flags as a temporary stopgap. Install process mostly implemented in meson (the pre-build codegen step will stay in typescript). Functional flatpak build A docker image for development Initial CI integrations","title":"V0.1.1 alpha"},{"location":"releases/v0.1.1-alpha/#v011-alpha","text":"This first alpha release is not meant to be usable in real-world scenarios, and documentation will not be there yet for the most part. The main objective is to implement & test most of the pipelines needed to: build vs install it the generation of its flatpak image Still, vs is somewhat usable as a technical preview. For now, the building pipeline is not well documented, and it can be hard to replicate. Also, installing it on most distributions might cause issues with your past or future dependencies. You should be able to try it out via flatpak and the docker image provided by @andy5995. I am seeking feedback, so you are very welcome to test it along! For reference, you can check what is the intended scope of this project in terms of future developments and expected features. The milestone page also contains some related information.","title":"v0.1.1-alpha"},{"location":"releases/v0.1.1-alpha/#whats-new","text":"This is what has been implemented so far (and some missing feature for context): Basic CLI features for the command vs . These are not expected to change for quite a while. Code generation infrastructure for fltk components and derived schemas. Infrastructure to handle the user sqlite database with proper schemas and migration. A small set of components from fltk being exposed, like buttons, labels, windows etc. Several features of vs exposed as XML elements: mixin embedded script embedded policies namespace import use caching directives dynamic data Basic XML builder (no full caching, no multithreading) Templating engine for vs components. Integration is complete, but there is ongoing work tracked in a separate repo Embedded scripts: Support for c via tcc Modules Callbacks Props Computed Dispatcher Setters/getters FFI to external libraries Debug interface Support for js via quickjs Modules Callbacks Props Computed Dispatcher Setters/getters FFI to external libraries Debug interface Very early and limited c bindings for vs.fltk , mostly for testing purposes. A simple in-memory caching for files, compiled scripts & parsed XML trees. The more complex sqlite cache is yet to be implemented in code. An early (partial) implementation of policies and coarse-grained flags as a temporary stopgap. Install process mostly implemented in meson (the pre-build codegen step will stay in typescript). Functional flatpak build A docker image for development Initial CI integrations","title":"What&rsquo;s new?"},{"location":"users/env-vars/","text":"WIP Debugging # Name Type Description VS_ACTIONS_FILE fs-path If specified, an xml file including a list of actions to operate on the UI (for automatic testing) VS_DEBUG_FILE fs-path If specified, file where debug records are appended. Else, there is no side effect for those operations VS_LOG_FILE fs-path If specified, file where log records are appended. Else, std out VS_LOG_LEVEL silent,basic,verbose,debug Globally set the baseline log level, so that some messages can be skipped if not relevant. Safety policies # Policy level: all none trusted normal safe Name Type Description VS_GLOBAL_POLICY VS_NETWORKING_POLICY VS_SCRIPTS_POLICY VS_NATIVE_COMPONENTS_POLICY Runtime # Name Type Description VS_DB fs-path A path to a custom database for session/persistent caching & storage. If not specified the default one will be used VS_HEADLESS boolean If true no UI is rendered, useful for testing purposes. VS_PARSER_MODE balanced,low-mem It changes the type of parse used, mostly for compatibility with lower spec hardware. balanced by default VS_NO_CACHE boolean Disable any kind of caching & persistence. Some sort of \u201cguest\u201d mode or for diagnostics. VS_NO_THEME boolean Disable any kind of custom theming VS_PREFIX_DIR fs-path Define a base root not in / . Used to run vs when installed as portable on a system. Also good for testing.","title":"Env vars"},{"location":"users/env-vars/#debugging","text":"Name Type Description VS_ACTIONS_FILE fs-path If specified, an xml file including a list of actions to operate on the UI (for automatic testing) VS_DEBUG_FILE fs-path If specified, file where debug records are appended. Else, there is no side effect for those operations VS_LOG_FILE fs-path If specified, file where log records are appended. Else, std out VS_LOG_LEVEL silent,basic,verbose,debug Globally set the baseline log level, so that some messages can be skipped if not relevant.","title":"Debugging"},{"location":"users/env-vars/#safety-policies","text":"Policy level: all none trusted normal safe Name Type Description VS_GLOBAL_POLICY VS_NETWORKING_POLICY VS_SCRIPTS_POLICY VS_NATIVE_COMPONENTS_POLICY","title":"Safety policies"},{"location":"users/env-vars/#runtime","text":"Name Type Description VS_DB fs-path A path to a custom database for session/persistent caching & storage. If not specified the default one will be used VS_HEADLESS boolean If true no UI is rendered, useful for testing purposes. VS_PARSER_MODE balanced,low-mem It changes the type of parse used, mostly for compatibility with lower spec hardware. balanced by default VS_NO_CACHE boolean Disable any kind of caching & persistence. Some sort of \u201cguest\u201d mode or for diagnostics. VS_NO_THEME boolean Disable any kind of custom theming VS_PREFIX_DIR fs-path Define a base root not in / . Used to run vs when installed as portable on a system. Also good for testing.","title":"Runtime"},{"location":"users/file-types/","text":"","title":"File types"},{"location":"users/safety-policies/","text":"Risk assessment guidelines # vs should always be considered as an unsafe runtime. While there is a fair amount of effort in sandboxing and gatekeeping the underlying system to any embedded script, these are mitigations for user errors at best and not safety features. The actual degree of safety widely varies depending on the type of embedded script and component being used. For this reason it is possible to configure what is allowed and where as part of a risk mitigation strategy in the user configuration. Component type Risk level Notes Basic XML Lowest As long as pugixml and vs don\u2019t have nasty bugs it is fine Preprocessed XML Lowest Same as before (aside from vulnerabilities in the preprocessor) XML + Native Highest It is very easy to break the thin sandbox and run arbitrary code XML + QuickJS Medium QuickJS is sandboxed, but there could be vulnerabilities in the parser leading to exploits XML + WASM Low As long as you trust WAMR to be sound it will be fine XML + Lua Medium Like QuickJS, it is possible for Lua to have vulnerabilities in its parser or runtime XML + LuaJIT High Not as bad as pure native code,yet the sandbox of LuaJIT is not designed for that Native components Highest Arbitrary code doing arbitrary things, unless externally constrained WASI components Low As long as WAMR holds and our interface has no hole, they are much safer (and portable) alternatives to native components High-risk combinations should only be ever used when you fully trust your source of code and the chain to obtain it. It is really unadvisable to keep them enabled for apps/components fetched via http , even if the source is trusted as you might be victim of man in the middle attacks. Definition of policies # Policies are rules which are enforced by the engine to determine which operations and which feature are allowed based on contextual information. They can be used, for example, to allow local applications to run scripts usually considered as less safe, and disallow the same when coming from all internet sources but few selected addresses. During runtime, there are three main source determining policies: Via coarse-grained environment variables made available. Those are used as root for derivation for every policy coming after. For example setting VS_NETWORKING_POLICY=none as a variable will ensure networking will always be disabled no matter what. Via user profiles. As part of each user\u2019s configuration, it is possible to store rules that for more or less specific path patterns and app uuid will apply specialized policies. Via meta information in the XML of components and applications. Those are only hints, and it is up to the engine to decide whether they should be accepted or not, at times with an explicit request to the user. It is possible that a single component or app can have multiple viable rule sets matching their path, base id or uuid. Only one set should be applied at any time, and it is the one with the highest match. For example: https://** will match any request performed via https. https://app.example.org/** will match any request associated to a specific domain. #app-id:xxxxxxx will match a specific app id (possibly cloned) given by a vendor. unique#app-id:xxxxxxx will match the unique id determined by the app id, its location AND the secret user key. The more specific set which applies will be the one selected. Rule sets can be specified as a combination of requirements like URL patterns AND unique identifier.","title":"Safety policies"},{"location":"users/safety-policies/#risk-assessment-guidelines","text":"vs should always be considered as an unsafe runtime. While there is a fair amount of effort in sandboxing and gatekeeping the underlying system to any embedded script, these are mitigations for user errors at best and not safety features. The actual degree of safety widely varies depending on the type of embedded script and component being used. For this reason it is possible to configure what is allowed and where as part of a risk mitigation strategy in the user configuration. Component type Risk level Notes Basic XML Lowest As long as pugixml and vs don\u2019t have nasty bugs it is fine Preprocessed XML Lowest Same as before (aside from vulnerabilities in the preprocessor) XML + Native Highest It is very easy to break the thin sandbox and run arbitrary code XML + QuickJS Medium QuickJS is sandboxed, but there could be vulnerabilities in the parser leading to exploits XML + WASM Low As long as you trust WAMR to be sound it will be fine XML + Lua Medium Like QuickJS, it is possible for Lua to have vulnerabilities in its parser or runtime XML + LuaJIT High Not as bad as pure native code,yet the sandbox of LuaJIT is not designed for that Native components Highest Arbitrary code doing arbitrary things, unless externally constrained WASI components Low As long as WAMR holds and our interface has no hole, they are much safer (and portable) alternatives to native components High-risk combinations should only be ever used when you fully trust your source of code and the chain to obtain it. It is really unadvisable to keep them enabled for apps/components fetched via http , even if the source is trusted as you might be victim of man in the middle attacks.","title":"Risk assessment guidelines"},{"location":"users/safety-policies/#definition-of-policies","text":"Policies are rules which are enforced by the engine to determine which operations and which feature are allowed based on contextual information. They can be used, for example, to allow local applications to run scripts usually considered as less safe, and disallow the same when coming from all internet sources but few selected addresses. During runtime, there are three main source determining policies: Via coarse-grained environment variables made available. Those are used as root for derivation for every policy coming after. For example setting VS_NETWORKING_POLICY=none as a variable will ensure networking will always be disabled no matter what. Via user profiles. As part of each user\u2019s configuration, it is possible to store rules that for more or less specific path patterns and app uuid will apply specialized policies. Via meta information in the XML of components and applications. Those are only hints, and it is up to the engine to decide whether they should be accepted or not, at times with an explicit request to the user. It is possible that a single component or app can have multiple viable rule sets matching their path, base id or uuid. Only one set should be applied at any time, and it is the one with the highest match. For example: https://** will match any request performed via https. https://app.example.org/** will match any request associated to a specific domain. #app-id:xxxxxxx will match a specific app id (possibly cloned) given by a vendor. unique#app-id:xxxxxxx will match the unique id determined by the app id, its location AND the secret user key. The more specific set which applies will be the one selected. Rule sets can be specified as a combination of requirements like URL patterns AND unique identifier.","title":"Definition of policies"}]}